\doxysection{isr.\+c}
\hypertarget{isr_8c_source}{}\label{isr_8c_source}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/interrupts/isr.c@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/interrupts/isr.c}}
\mbox{\hyperlink{isr_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00002}00002\ \textcolor{comment}{\ *\ PROJECT:\ \ \ \ \ MatanelOS\ Kernel}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00003}00003\ \textcolor{comment}{\ *\ LICENSE:\ \ \ \ \ NONE}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00004}00004\ \textcolor{comment}{\ *\ PURPOSE:\ \ \ \ \ IMPLEMENTATION\ To\ SETUP\ ISR\ Handler.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00005}00005\ \textcolor{comment}{\ *\ EXPLANATION:\ An\ ISR\ is\ what\ handles\ the\ interrupts\ that\ gets\ sent\ from\ the\ CPU\ (after\ interrupt\ is\ sent\ to\ ISR\ itself),\ it\ will\ do\ stuff\ based\ if\ it's\ an\ exception,\ or\ a\ normal\ interrupt.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00006}00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{idt_8h}{idt.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{apic_8h}{../cpu/apic/apic.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00011}00011\ \textcolor{keyword}{extern}\ \mbox{\hyperlink{uefi__memory_8h_a76f436ea56fd593cab07a6800d630828}{GOP\_PARAMS}}\ \mbox{\hyperlink{bugcheck_8c_ad8ca0be32b831aec9de80bcf0e22107e}{gop\_local}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00013}\mbox{\hyperlink{isr_8c_ab9b45563a6b3c0f9e83289c9ef86c9e2}{00013}}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{isr_8c_ab9b45563a6b3c0f9e83289c9ef86c9e2}{has\_error\_code}}[]\ =\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00014}00014\ \ \ \ \ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{comment}{//\ 0-\/7}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00015}00015\ \ \ \ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{false},\ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{false},\ \textcolor{comment}{//\ 8-\/15}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00016}00016\ \ \ \ \ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{comment}{//\ 16-\/23}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00017}00017\ \ \ \ \ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false}\ \ \textcolor{comment}{//\ 24-\/31}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00018}00018\ \};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00020}00020\ \textcolor{preprocessor}{\#ifndef\ \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00021}\mbox{\hyperlink{isr_8c_a08a5bd6c9e05dcc56233cebc470c63e9}{00021}}\ \mbox{\hyperlink{isr_8c_a08a5bd6c9e05dcc56233cebc470c63e9}{\_\_attribute\_\_}}((used))}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00022}00022\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00023}00023\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{idt_8h_a934d9d6387cf9d0ad2ec6f94289204ba}{isr\_handler64}}(\textcolor{keywordtype}{int}\ vec\_num,\ \mbox{\hyperlink{cpu__types_8h_ac240bdf341c5e0ae333252cd5ecf0261}{CTX\_FRAME}}*\ ctx,\ \mbox{\hyperlink{cpu__types_8h_a1aa24edc1ea7270821fa045a386390f3}{INT\_FRAME}}*\ intfr)\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00024}00024\ \ \ \ \ \textcolor{keywordtype}{char}\ buf[256];}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00025}00025\ \ \ \ \ \mbox{\hyperlink{gop_8c_a4c58494b90fd7bfbc33a84178e327b88}{ksnprintf}}(buf,\ \textcolor{keyword}{sizeof}(buf),\ \textcolor{stringliteral}{"{}INTERRUPT:\ \%d"{}},\ vec\_num);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00026}00026\ \ \ \ \ tracelast\_func(buf);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00027}00027\ \ \ \ \ \mbox{\hyperlink{cpu__types_8h_a7258ea91cea6c1c174df48f6225ef4da}{IRQL}}\ oldIrql;}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00028}00028\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00029}00029\ \ \ \ \ \textcolor{comment}{//\ Save\ if\ the\ scheduler\ was\ enabled\ or\ not\ before\ raising\ to\ >=\ DISPATCH\_LEVEL\ (because\ in\ dispatch\_level\ the\ scheduler\ gets\ disabled\ to\ disable\ pre-\/emption)}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00030}00030\ \ \ \ \ \textcolor{keywordtype}{bool}\ schedulerEnabled\ =\ \mbox{\hyperlink{bugcheck_8c_a0b2a3530e9a5998456be351b4251b878}{cpu}}.schedulerEnabled;}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00032}00032\ \ \ \ \ ctx-\/>\mbox{\hyperlink{struct___c_t_x___f_r_a_m_e_a90e28f434559f0582a69699dc4dbc286}{rip}}\ =\ intfr-\/>\mbox{\hyperlink{struct___i_n_t___f_r_a_m_e_a90e28f434559f0582a69699dc4dbc286}{rip}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00033}00033\ \ \ \ \ ctx-\/>\mbox{\hyperlink{struct___c_t_x___f_r_a_m_e_a8e218c31298bb17b5041cfc61646d6b9}{rsp}}\ =\ intfr-\/>\mbox{\hyperlink{struct___i_n_t___f_r_a_m_e_a8e218c31298bb17b5041cfc61646d6b9}{rsp}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00034}00034\ \ \ \ \ intfr-\/>\mbox{\hyperlink{struct___i_n_t___f_r_a_m_e_a6c3589b2f7ad6179e386511136265b54}{vector}}\ =\ vec\_num;}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00036}00036\ \ \ \ \ \textcolor{keywordflow}{switch}\ (vec\_num)\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214ac5d77cf2c3a1a05e98d1ca488f448824}{EXCEPTION\_DIVIDE\_BY\_ZERO}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_afdff5d9ebe56cdc7b4e405c5082f7016}{dividebyzero\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00039}00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00040}00040\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a34437286a5ca69c483131c8ee5c563a2}{EXCEPTION\_SINGLE\_STEP}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00041}00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a4c7a9e8b64a2217f1db9849da60f4c39}{debugsinglestep\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a5575f7b0beae8f5ed115245774a84629}{EXCEPTION\_NON\_MASKABLE\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00044}00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a4fb94a50a85a92c8939fa2201c5ba0d8}{\_MtSetIRQL}}(\mbox{\hyperlink{cpu__types_8h_a6ff101fd8adf1c79792d98893f8dee3ea179bd93cb26ad6988d9665bad27c0bbf}{HIGH\_LEVEL}});\ \textcolor{comment}{//\ Non\ Maskable\ Interrupt\ -\/\ basically\ when\ the\ CPU\ encounters\ a\ hardware\ fault,\ cannot\ be\ masked,\ very\ alarming.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00045}00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ae0aa5bdafbe39e536fe71b3cab07d767}{nmi\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00046}00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00047}00047\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214ad90595dbf7da7c1a90b1bb76cd426a77}{EXCEPTION\_BREAKPOINT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00048}00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a609ea769c187f7a0f997758b14ac3f73}{breakpoint\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00049}00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00050}00050\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214acb5247bc169981abaf50b244e3ac7081}{EXCEPTION\_OVERFLOW}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_adac02289d8e565aee7c9effa80747f93}{overflow\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00053}00053\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214afd671ee236b6060386acc851ff037ae3}{EXCEPTION\_BOUNDS\_CHECK}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00054}00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a0ea5fd9348cbe6ab00ff2f3a872e664a}{boundscheck\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00056}00056\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a28557d1f02680259d9ed8b1dd9f86c91}{EXCEPTION\_INVALID\_OPCODE}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_aff8a45b5d56042eacac1147077281fb3}{invalidopcode\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214aa12c9ea7b6ded404e6d2084f1abbe4a7}{EXCEPTION\_NO\_COPROCESSOR}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00060}00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a6b703ce7de6f493f66cee51eb8e59a33}{nocoprocessor\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a6f0ec56ae735aee3ab6f847eaac35c12}{EXCEPTION\_DOUBLE\_FAULT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a4fb94a50a85a92c8939fa2201c5ba0d8}{\_MtSetIRQL}}(\mbox{\hyperlink{cpu__types_8h_a6ff101fd8adf1c79792d98893f8dee3ea179bd93cb26ad6988d9665bad27c0bbf}{HIGH\_LEVEL}});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_acfe0741651b4edf7d92791e0656a5a48}{doublefault\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00066}00066\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214ab9c9591e09e612b99b1f4b3ed4baac56}{EXCEPTION\_COPROCESSOR\_SEGMENT\_OVERRUN}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00067}00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a26e585eb170d255d03c6323349df7e83}{coprocessor\_segment\_overrun\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00068}00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00069}00069\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214aab7c1bc6a85b1bb7a169c4a9ec74fe1b}{EXCEPTION\_SEGMENT\_SELECTOR\_NOTPRESENT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a8fec482647c6fb6fbbabdf55e602eef4}{segment\_selector\_not\_present\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00071}00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00072}00072\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a167bd7d866af5dcb76bf161e19289791}{EXCEPTION\_INVALID\_TSS}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00073}00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a0f81c6470be5e4bbb9f8b5e4997bbc5a}{invalidtss\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00075}00075\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214aabd2df61deb5496cb463a88a8191121f}{EXCEPTION\_GENERAL\_PROTECTION\_FAULT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00076}00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a1005cf7e59cf67342709473d87edf5bf}{gpf\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00078}00078\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214ade46737499822de31e31ff98231d0c81}{EXCEPTION\_PAGE\_FAULT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ac6967370e83425329246124a56e29b57}{pagefault\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00081}00081\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214aaa31477a0c9d066d153450fe17da1a99}{EXCEPTION\_RESERVED}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reserved,\ do\ not\ use.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00084}00084\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a0bf33f61d31bd770d084aafaa448804a}{EXCEPTION\_FLOATING\_POINT\_ERROR}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_af0c0283a079f47d9979e594f76e7c5ed}{fpu\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214ad4b5e8f2517bdaca4e4e1493ce8a8723}{EXCEPTION\_ALIGNMENT\_CHECK}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ae2c429574b397c858bb4b59c670e1ce4}{alignment\_check\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00090}00090\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_a4852689eeafee74c009c94108fce7214a2e45e5a1b0d6c7808955edb00a32b730}{EXCEPTION\_SEVERE\_MACHINE\_CHECK}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a4fb94a50a85a92c8939fa2201c5ba0d8}{\_MtSetIRQL}}(\mbox{\hyperlink{cpu__types_8h_a6ff101fd8adf1c79792d98893f8dee3ea179bd93cb26ad6988d9665bad27c0bbf}{HIGH\_LEVEL}});\ \textcolor{comment}{//\ machine\ check,\ like\ NMI,\ high\ irql.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00092}00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_abf78eebebdfe77d4d5cb902171c44173}{severe\_machine\_check\_handler}}(ctx,\ intfr);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00094}00094\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_ab824659c51a6e5646465e02d7e50705fa2e43c0d2a9868a0b1734e2c4dbfddaff}{KEYBOARD\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00095}00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a7b283751f37f08c240ae3ec69c88036c}{MtRaiseIRQL}}(\mbox{\hyperlink{cpu__types_8h_a6ff101fd8adf1c79792d98893f8dee3eaa26c00abca6060aa0ef883d4feb64933}{DIRQL\_KEYBOARD}},\ \&oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00096}00096\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a2f4098fc71cbd39422c1001d66970bf5}{keyboard\_handler}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00097}00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a173035246a571f36d2066be8fa9eef11}{MtLowerIRQL}}(oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00099}00099\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_ab824659c51a6e5646465e02d7e50705faf382444ac68b3772041ec70af01a46bf}{LAPIC\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00100}00100\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a7b283751f37f08c240ae3ec69c88036c}{MtRaiseIRQL}}(\mbox{\hyperlink{cpu__types_8h_a6ff101fd8adf1c79792d98893f8dee3eaf269d1ff38f220586a36073e957c1c31}{DIRQL\_TIMER}},\ \&oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00101}00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ab748b00a3956d2d68d64e85374210e5a}{lapic\_handler}}(schedulerEnabled);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00102}00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a173035246a571f36d2066be8fa9eef11}{MtLowerIRQL}}(oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00104}00104\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{idt_8h_ab824659c51a6e5646465e02d7e50705fa69438209e687b8cdc26f5c31aa2e2e41}{LAPIC\_SIV\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ send\ EOI}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apic_8c_a5c673232a19d0c4e78792208eb62f0cc}{lapic\_eoi}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00107}00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gop_8c_a41ff1165c1969706dadb5b409ae082e9}{gop\_printf}}(0xFFFF0000,\ \textcolor{stringliteral}{"{}Interrupt\ Exception:\ "{}});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gop_8c_a41ff1165c1969706dadb5b409ae082e9}{gop\_printf}}(0xFFFFFFFF,\ \textcolor{stringliteral}{"{}\%d\(\backslash\)r\(\backslash\)n"{}},\ vec\_num);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00112}00112\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00113}00113\ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00115}\mbox{\hyperlink{idt_8h_a657e2cb18189e638d49a59d6472f91e1}{00115}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{isr_8c_a88ada49c1954d38252049786595d9a5f}{init\_interrupts}}()\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00116}00116\ \ \ \ \ \mbox{\hyperlink{idt_8c_a4acdc6d6294313b1aae6d032bb42bf2d}{install\_idt}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00117}00117\ \ \ \ \ \mbox{\hyperlink{irql_8c_a4fb94a50a85a92c8939fa2201c5ba0d8}{\_MtSetIRQL}}(\mbox{\hyperlink{cpu__types_8h_a6ff101fd8adf1c79792d98893f8dee3eacf81bceb86f53bdf373ff56d5f6e179f}{PASSIVE\_LEVEL}});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00118}00118\ \}}

\end{DoxyCode}

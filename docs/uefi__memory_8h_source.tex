\doxysection{uefi\+\_\+memory.\+h}
\hypertarget{uefi__memory_8h_source}{}\label{uefi__memory_8h_source}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/memory/allocator/uefi\_memory.h@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/memory/allocator/uefi\_memory.h}}
\mbox{\hyperlink{uefi__memory_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00001}00001\ \textcolor{preprocessor}{\#ifndef\ UEFI\_MEMORY\_H}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00002}00002\ \textcolor{preprocessor}{\#define\ UEFI\_MEMORY\_H}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00004}00004\ \textcolor{comment}{//\ Standard\ headers,\ required.}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00009}00009\ \textcolor{comment}{//\ global}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00010}00010\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___b_l_o_c_k___d_e_v_i_c_e}{\_BLOCK\_DEVICE}}\ \mbox{\hyperlink{block_8h_a1e03bdef1501e96036b676dc18e71787}{BLOCK\_DEVICE}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00012}00012\ \textcolor{comment}{//\ Minimal\ UEFI\ memory\ descriptor\ for\ kernel\ use}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00013}00013\ \textcolor{comment}{//\ Matches\ UEFI\ spec\ EFI\_MEMORY\_DESCRIPTOR\ up\ to\ PhysicalStart,\ NumberOfPages,\ Type}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00015}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r}{00015}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r}{\_EFI\_MEMORY\_DESCRIPTOR}}\ \{}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00016}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a140acdd7ac30628e97d1851104f05c03}{00016}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a140acdd7ac30628e97d1851104f05c03}{Type}};\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ What\ this\ memory\ region\ is\ used\ for}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00017}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_aa9bcd82fb5bdd0dfdbe14ef7fa61fd48}{00017}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_aa9bcd82fb5bdd0dfdbe14ef7fa61fd48}{Pad}};\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Alignment\ /\ padding}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00018}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_ad31a686b44d9fa70840b0f625434e291}{00018}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_ad31a686b44d9fa70840b0f625434e291}{PhysicalStart}};\ \textcolor{comment}{//\ Physical\ start\ address\ of\ the\ region}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00019}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a43a7fe3439ad63bb877dae83124009c6}{00019}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a43a7fe3439ad63bb877dae83124009c6}{VirtualStart}};\ \ \textcolor{comment}{//\ Virtual\ start\ (usually\ 0\ during\ boot)}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00020}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a84530c369b622a5f3899052267fa18fe}{00020}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a84530c369b622a5f3899052267fa18fe}{NumberOfPages}};\ \textcolor{comment}{//\ Size\ of\ the\ region\ in\ pages\ (usually\ 4\ KB)}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00021}\mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a9d4056658b9710987f6359fb9d9596e6}{00021}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___e_f_i___m_e_m_o_r_y___d_e_s_c_r_i_p_t_o_r_a9d4056658b9710987f6359fb9d9596e6}{Attribute}};\ \ \ \ \ \textcolor{comment}{//\ Flags\ (cacheable,\ runtime,\ etc.)}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00022}\mbox{\hyperlink{uefi__memory_8h_ae2b15dcae1dcf3876131751b232dc591}{00022}}\ \}\ \mbox{\hyperlink{uefi__memory_8h_ae2b15dcae1dcf3876131751b232dc591}{EFI\_MEMORY\_DESCRIPTOR}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00024}\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s}{00024}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s}{\_GOP\_PARAMS}}\ \{}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00025}\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_a05f8bedf635802bfc7465973f17fea76}{00025}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_a05f8bedf635802bfc7465973f17fea76}{FrameBufferBase}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00026}\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_a97227cbc290372f0eac8e03f7784d503}{00026}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_a97227cbc290372f0eac8e03f7784d503}{FrameBufferSize}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00027}\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_ad672690f555bb08866a491753109e551}{00027}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_ad672690f555bb08866a491753109e551}{Width}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Visible\ width\ in\ pixels}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00028}\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_a3bdc883455d9732f65c9d4cb1aebe28b}{00028}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_a3bdc883455d9732f65c9d4cb1aebe28b}{Height}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Visible\ height\ in\ pixels}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00029}\mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_adbe45e87cbfa74ab43642ecefa2cec83}{00029}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___g_o_p___p_a_r_a_m_s_adbe45e87cbfa74ab43642ecefa2cec83}{PixelsPerScanLine}};\ \ \ \textcolor{comment}{//\ Actual\ pixels\ per\ row\ in\ framebuffer\ (stride)}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00030}\mbox{\hyperlink{uefi__memory_8h_a76f436ea56fd593cab07a6800d630828}{00030}}\ \}\ \mbox{\hyperlink{uefi__memory_8h_a76f436ea56fd593cab07a6800d630828}{GOP\_PARAMS}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00032}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o}{00032}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o}{\_BOOT\_INFO}}\ \{}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00033}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_aab6f1679f3c12592a766d2f3078ef80d}{00033}}\ \ \ \ \ \mbox{\hyperlink{uefi__memory_8h_a76f436ea56fd593cab07a6800d630828}{GOP\_PARAMS}}*\ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_aab6f1679f3c12592a766d2f3078ef80d}{Gop}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00034}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a43e384015b713dc64d7f8a59ad452622}{00034}}\ \ \ \ \ \mbox{\hyperlink{uefi__memory_8h_ae2b15dcae1dcf3876131751b232dc591}{EFI\_MEMORY\_DESCRIPTOR}}*\ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a43e384015b713dc64d7f8a59ad452622}{MemoryMap}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00035}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a9bec53c13537ffc17434fc3db3f36f0d}{00035}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a9bec53c13537ffc17434fc3db3f36f0d}{MapSize}};\ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00036}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a8bc89261b88b97450ff261d153d0bbdb}{00036}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a8bc89261b88b97450ff261d153d0bbdb}{DescriptorSize}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00037}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a9bd937b7be27174d2dc8180375fec3b8}{00037}}\ \ \ \ \ uint32\_t\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a9bd937b7be27174d2dc8180375fec3b8}{DescriptorVersion}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00038}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a23b3867b03377e742e1537a995614d4a}{00038}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a23b3867b03377e742e1537a995614d4a}{AhciCount}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00039}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a5f8313f482578def454206464500791f}{00039}}\ \ \ \ \ uint64\_t*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a5f8313f482578def454206464500791f}{AhciBarBases}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00040}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a61086e11b571ce7c7b87cc71149f142f}{00040}}\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a61086e11b571ce7c7b87cc71149f142f}{KernelStackTop}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00041}\mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a090449e0fb7c66ee9dbf612ea681ba07}{00041}}\ \ \ \ \ uintptr\_t\ \mbox{\hyperlink{struct___b_o_o_t___i_n_f_o_a090449e0fb7c66ee9dbf612ea681ba07}{Pml4Phys}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00042}\mbox{\hyperlink{uefi__memory_8h_aa7f93145770b2b55fa44fc8b9a2cf58d}{00042}}\ \}\ \mbox{\hyperlink{kernel_8h_aa7f93145770b2b55fa44fc8b9a2cf58d}{BOOT\_INFO}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00043}00043\ \textcolor{preprocessor}{\#ifndef\ \_MSC\_VER\ }}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00044}00044\ \textcolor{keyword}{\_Static\_assert}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{kernel_8h_aa7f93145770b2b55fa44fc8b9a2cf58d}{BOOT\_INFO}})\ ==\ 72,\ \textcolor{stringliteral}{"{}Size\ of\ BOOT\_INFO\ doesn't\ equal\ 72\ bytes.\ Update\ the\ struct."{}});}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00045}00045\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00047}00047\ \textcolor{comment}{//\ Memory\ types\ (we\ only\ need\ ConventionalMemory\ here)}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00048}\mbox{\hyperlink{uefi__memory_8h_af4e9f34f6444eef713f1e6239642490d}{00048}}\ \textcolor{preprocessor}{\#define\ EfiReservedMemoryType\ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00049}\mbox{\hyperlink{uefi__memory_8h_a90aae2e90363a29ad96d432a5f7f72dc}{00049}}\ \textcolor{preprocessor}{\#define\ EfiLoaderCode\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00050}\mbox{\hyperlink{uefi__memory_8h_a63d4f335cccc52962bc247c9001f0170}{00050}}\ \textcolor{preprocessor}{\#define\ EfiLoaderData\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00051}\mbox{\hyperlink{uefi__memory_8h_a4f64535d5504ac8f2ebf923f6d0ced08}{00051}}\ \textcolor{preprocessor}{\#define\ EfiBootServicesCode\ \ \ \ \ \ \ \ \ \ \ \ 3\ }}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00052}\mbox{\hyperlink{uefi__memory_8h_aa4fa5f19b00f75592a5d1a5335409e28}{00052}}\ \textcolor{preprocessor}{\#define\ EfiBootServicesData\ \ \ \ \ \ \ \ \ \ \ \ 4\ }}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00053}\mbox{\hyperlink{uefi__memory_8h_af3cee49f9ec781299b538a17e9e02ff8}{00053}}\ \textcolor{preprocessor}{\#define\ EfiRuntimeServicesCode\ \ \ \ \ \ \ \ \ 5}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00054}\mbox{\hyperlink{uefi__memory_8h_a1f301de8ab02b899d7144cd4d2157789}{00054}}\ \textcolor{preprocessor}{\#define\ EfiRuntimeServicesData\ \ \ \ \ \ \ \ \ 6}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00055}\mbox{\hyperlink{uefi__memory_8h_af095fe56818f3bd8a310206b8777bb1c}{00055}}\ \textcolor{preprocessor}{\#define\ EfiConventionalMemory\ \ \ \ \ \ \ \ \ \ 7\ }}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00056}00056\ \textcolor{comment}{//\ ...\ other\ types\ omitted\ for\ brevity}}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00058}00058\ \textcolor{keyword}{extern}\ \mbox{\hyperlink{kernel_8h_aa7f93145770b2b55fa44fc8b9a2cf58d}{BOOT\_INFO}}\ \mbox{\hyperlink{ahci_8c_a5f06053b8248ece91f68e4ae8da74ee4}{boot\_info\_local}};}
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{uefi__memory_8h_source_l00060}00060\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ UEFI\_MEMORY\_H}}

\end{DoxyCode}

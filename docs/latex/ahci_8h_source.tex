\doxysection{ahci.\+h}
\hypertarget{ahci_8h_source}{}\label{ahci_8h_source}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/drivers/ahci/ahci.h@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/drivers/ahci/ahci.h}}
\mbox{\hyperlink{ahci_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00002}00002\ \textcolor{comment}{\ *\ PROJECT:\ \ \ \ \ \ MatanelOS\ Kernel}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00003}00003\ \textcolor{comment}{\ *\ LICENSE:\ \ \ \ \ \ GPLv3}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00004}00004\ \textcolor{comment}{\ *\ PURPOSE:\ \ \ \ \ \ AHCI\ Driver\ types\ and\ functions.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00005}00005\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00007}00007\ \textcolor{preprocessor}{\#ifndef\ X86\_DRIVER\_AHCI\_H}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00008}00008\ \textcolor{preprocessor}{\#define\ X86\_DRIVER\_AHCI\_H}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{block_8h}{../blk/block.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mtstatus_8h}{../../mtstatus.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00016}00016\ \textcolor{comment}{//\ Maximum\ number\ of\ AHCI\ Ports\ supported}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00017}\mbox{\hyperlink{ahci_8h_a21dfe7d03e0027f3c2e4a1bc81e8d85a}{00017}}\ \textcolor{preprocessor}{\#define\ AHCI\_MAX\_PORTS\ 32}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00019}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0e}{00019}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0e}{\_FIS\_TYPE}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00020}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea6bf1b47f446739ef43faae8f336c3926}{00020}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea6bf1b47f446739ef43faae8f336c3926}{FIS\_TYPE\_REG\_H2D}}\ =\ 0x27,\ \ \ \ \textcolor{comment}{//\ Register\ FIS\ -\/\ host\ to\ device}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00021}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eae1d5eaa1f1a908043927530044b4394d}{00021}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eae1d5eaa1f1a908043927530044b4394d}{FIS\_TYPE\_REG\_D2H}}\ =\ 0x34,\ \ \ \ \textcolor{comment}{//\ Register\ FIS\ -\/\ device\ to\ host}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00022}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea1a3d1978859cdf6c6001c13177dbd386}{00022}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea1a3d1978859cdf6c6001c13177dbd386}{FIS\_TYPE\_DMA\_ACT}}\ =\ 0x39,\ \ \ \ \textcolor{comment}{//\ DMA\ activate\ FIS\ -\/\ device\ to\ host}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00023}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eadb343aab8b5d14af51decdcc24629af8}{00023}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eadb343aab8b5d14af51decdcc24629af8}{FIS\_TYPE\_DMA\_SETUP}}\ =\ 0x41,\ \ \ \ \textcolor{comment}{//\ DMA\ setup\ FIS\ -\/\ bidirectional}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00024}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eac2c749b258ea247c739772b70ee8fe96}{00024}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eac2c749b258ea247c739772b70ee8fe96}{FIS\_TYPE\_DATA}}\ =\ 0x46,\ \ \textcolor{comment}{//\ Data\ FIS\ -\/\ bidirectional}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00025}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea6d51bc47354d35b144fa146cbcb0d5cd}{00025}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea6d51bc47354d35b144fa146cbcb0d5cd}{FIS\_TYPE\_BIST}}\ =\ 0x58,\ \ \textcolor{comment}{//\ BIST\ activate\ FIS\ -\/\ bidirectional}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00026}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea2af968dcd3c14953622d44e9e90c6336}{00026}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0ea2af968dcd3c14953622d44e9e90c6336}{FIS\_TYPE\_PIO\_SETUP}}\ =\ 0x5F,\ \ \ \ \textcolor{comment}{//\ PIO\ setup\ FIS\ -\/\ device\ to\ host}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00027}\mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eab4aa404255097815f1e4a1dd372a151a}{00027}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a84b1dcd3aa23624d89f56832a5e3ae0eab4aa404255097815f1e4a1dd372a151a}{FIS\_TYPE\_DEV\_BITS}}\ =\ 0xA1,\ \ \textcolor{comment}{//\ Set\ device\ bits\ FIS\ -\/\ device\ to\ host}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00028}\mbox{\hyperlink{ahci_8h_aaa012a39ebaec4f839857efe7b8b0af6}{00028}}\ \}\ \mbox{\hyperlink{ahci_8h_aaa012a39ebaec4f839857efe7b8b0af6}{FIS\_TYPE}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00031}\mbox{\hyperlink{struct___h_b_a___m_e_m}{00031}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{volatile}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___h_b_a___m_e_m}{\_HBA\_MEM}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00032}\mbox{\hyperlink{struct___h_b_a___m_e_m_a8de1478f7db47c6c3a1f9587ef382579}{00032}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a8de1478f7db47c6c3a1f9587ef382579}{cap}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x00:\ Host\ Capabilities.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00033}\mbox{\hyperlink{struct___h_b_a___m_e_m_a9c577f3e92ff99afff718fe42c3fb06a}{00033}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a9c577f3e92ff99afff718fe42c3fb06a}{ghc}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x04:\ Global\ host\ control}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00034}\mbox{\hyperlink{struct___h_b_a___m_e_m_ab21fab504791fdabfb4441c735452afb}{00034}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_ab21fab504791fdabfb4441c735452afb}{is}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x08:\ Interrupt\ Status}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00035}\mbox{\hyperlink{struct___h_b_a___m_e_m_a758f6c558cc8d68e2a25f13e046eae6f}{00035}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a758f6c558cc8d68e2a25f13e046eae6f}{pi}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x0C:\ Ports\ implemented.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00036}\mbox{\hyperlink{struct___h_b_a___m_e_m_aa28ef6d3e35ddb7e7c464496e2789fee}{00036}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_aa28ef6d3e35ddb7e7c464496e2789fee}{vs}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x10:\ Version}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00037}\mbox{\hyperlink{struct___h_b_a___m_e_m_a57208d1b8521334df7c5e9e5103af185}{00037}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a57208d1b8521334df7c5e9e5103af185}{ccc\_ctl}};\ \ \ \ \textcolor{comment}{//\ 0x14:\ Command\ completion\ coalescing\ control}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00038}\mbox{\hyperlink{struct___h_b_a___m_e_m_a78eeaafb4be125bcf73f5c77d91737e8}{00038}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a78eeaafb4be125bcf73f5c77d91737e8}{ccc\_pts}};\ \ \ \ \textcolor{comment}{//\ 0x18:\ Command\ completion\ coalescing\ ports.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00039}\mbox{\hyperlink{struct___h_b_a___m_e_m_a83914548fdfabd05de7e2ebd4df20537}{00039}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a83914548fdfabd05de7e2ebd4df20537}{em\_loc}};\ \ \textcolor{comment}{//\ 0x1C:\ Enclosure\ management\ location}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00040}\mbox{\hyperlink{struct___h_b_a___m_e_m_a35498bdea06b81b36992e6589c6e5d31}{00040}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a35498bdea06b81b36992e6589c6e5d31}{em\_ctl}};\ \ \textcolor{comment}{//\ 0x20:\ Enclosure\ management\ control}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00041}\mbox{\hyperlink{struct___h_b_a___m_e_m_a4fa9bca1f39d15977dd6998d1fc41782}{00041}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a4fa9bca1f39d15977dd6998d1fc41782}{cap2}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x24:\ Host\ capabilities\ EXTENDED.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00042}\mbox{\hyperlink{struct___h_b_a___m_e_m_a057fe5fa63bf28c6a35ba8baa0865556}{00042}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___m_e_m_a057fe5fa63bf28c6a35ba8baa0865556}{bohc}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x28:\ BIOS/OS\ handoff\ control\ and\ status.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00043}\mbox{\hyperlink{struct___h_b_a___m_e_m_a68744fe2b1c09ee12ead4587d4b08e27}{00043}}\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{struct___h_b_a___m_e_m_a68744fe2b1c09ee12ead4587d4b08e27}{rsv}}[0xA0\ -\/\ 0x2C];}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00044}\mbox{\hyperlink{struct___h_b_a___m_e_m_a85be2f23c3ec07ddccb037d5552fffb3}{00044}}\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{struct___h_b_a___m_e_m_a85be2f23c3ec07ddccb037d5552fffb3}{venor}}[0x100\ -\/\ 0xA0];}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00046}\mbox{\hyperlink{ahci_8h_ae5f2dfa1afa0c14d4de2cb55400b1f37}{00046}}\ \}\ \mbox{\hyperlink{ahci_8h_ae5f2dfa1afa0c14d4de2cb55400b1f37}{HBA\_MEM}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00049}\mbox{\hyperlink{struct___h_b_a___p_o_r_t}{00049}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{volatile}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___h_b_a___p_o_r_t}{\_HBA\_PORT}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00050}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a2fd95d5d04d61114c60b2c16fc908e41}{00050}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a2fd95d5d04d61114c60b2c16fc908e41}{clb}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x00:\ Command\ list\ base\ address\ lower\ 32\ bits.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00051}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a846391766b0bde62d390c6514ee575d2}{00051}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a846391766b0bde62d390c6514ee575d2}{clbu}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x04:\ Command\ list\ base\ address\ higher\ 32\ bits.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00052}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a38a54fe370e6c01108abfb4fdaf693e6}{00052}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a38a54fe370e6c01108abfb4fdaf693e6}{fb}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x08:\ FIS\ Base\ address\ lower\ 32\ bits.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00053}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a496af14f1d8470a17f862aa1e43cd3b2}{00053}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a496af14f1d8470a17f862aa1e43cd3b2}{fbu}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x0C:\ FIS\ Base\ address\ higher\ 32\ bits.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00054}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_ab21fab504791fdabfb4441c735452afb}{00054}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_ab21fab504791fdabfb4441c735452afb}{is}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x10:\ Interrupt\ Status.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00055}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_aa2ad0e2146ed3f9071c68fe04b064d51}{00055}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_aa2ad0e2146ed3f9071c68fe04b064d51}{ie}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x14:\ Interrupt\ Enable.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00056}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a5e9712b08d7cbf6091f9e5334ff97b5d}{00056}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a5e9712b08d7cbf6091f9e5334ff97b5d}{cmd}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x18:\ Command\ And\ Status.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00057}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_ae09be11ca919ba207e66f2dc574125eb}{00057}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_ae09be11ca919ba207e66f2dc574125eb}{rsv0}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x1C:\ RESERVED.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00058}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a357b46f1c8107383ad47b9b65b532f5f}{00058}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a357b46f1c8107383ad47b9b65b532f5f}{tfd}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x20:\ Task\ File\ Data.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00059}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_aeaeca6d0dd8e21e049c9a456195deeed}{00059}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_aeaeca6d0dd8e21e049c9a456195deeed}{sig}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x24:\ Signature.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00060}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a20e79ef71adff15c5481b97a2b8fb546}{00060}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a20e79ef71adff15c5481b97a2b8fb546}{ssts}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x28:\ Serial\ ATA\ Status.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00061}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_ae53b0cf43d87938d92cdc2f72b865160}{00061}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_ae53b0cf43d87938d92cdc2f72b865160}{sctl}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x2C:\ Serial\ ATA\ Control.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00062}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_aac086c44fba913e33d5d4480166f486f}{00062}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_aac086c44fba913e33d5d4480166f486f}{serr}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x30:\ Serial\ ATA\ Error.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00063}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_ab2bfc30a5716fe626f8e44dab6fdf425}{00063}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_ab2bfc30a5716fe626f8e44dab6fdf425}{sact}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x34:\ Serial\ ATA\ Active.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00064}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a5a98143e0639fd7e110a78a7d77231e0}{00064}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a5a98143e0639fd7e110a78a7d77231e0}{ci}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x38:\ Command\ Issue.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00065}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a5e216bb3cff4d0ee3ea5ee6f7cae3344}{00065}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a5e216bb3cff4d0ee3ea5ee6f7cae3344}{sntf}};\ \ \ \ \ \ \textcolor{comment}{//\ 0x3C:\ Serial\ ATA\ notification.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00066}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_af3588ae1f57cb27febe2f6eee1463e8e}{00066}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_af3588ae1f57cb27febe2f6eee1463e8e}{fbs}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0x40:\ FIS-\/Based\ switch\ control.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00067}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_a32ae32c9bdefcdf0497c2e8bf9d07e18}{00067}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_a32ae32c9bdefcdf0497c2e8bf9d07e18}{rsv1}}[11];\ \ \textcolor{comment}{//\ 0x44\ -\/\ 0x6F:\ RESERVED.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00068}\mbox{\hyperlink{struct___h_b_a___p_o_r_t_ad6b680093b394abcfe6e650241375944}{00068}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_o_r_t_ad6b680093b394abcfe6e650241375944}{vendor}}[4];\ \textcolor{comment}{//\ 0x70:\ Vendor\ Specific.}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00069}\mbox{\hyperlink{ahci_8h_ac8d5245a93b3d91b9fa746c801c74a28}{00069}}\ \}\ \mbox{\hyperlink{ahci_8h_ac8d5245a93b3d91b9fa746c801c74a28}{HBA\_PORT}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00071}00071\ \textcolor{comment}{//\ Data\ structures\ for\ FIS\ and\ Command\ Tables\ }}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00074}00074\ \textcolor{preprocessor}{\#pragma\ pack(push,\ 1)}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00075}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d}{00075}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d}{\_FIS\_REG\_H2D}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00076}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_aa682c9430d53cab300ee8940356ef8ec}{00076}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_aa682c9430d53cab300ee8940356ef8ec}{fis\_type}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00077}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a992e274c1d71ede460beb0d8af125622}{00077}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a992e274c1d71ede460beb0d8af125622}{pmport}}\ :\ 4;}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00078}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a8dff9d8e8d3c6c420c77bdaafdb0fa75}{00078}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a8dff9d8e8d3c6c420c77bdaafdb0fa75}{rsv0}}\ :\ 3;}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00079}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a2e5a04327b5658199f0f7bda2acceee1}{00079}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a2e5a04327b5658199f0f7bda2acceee1}{c}}\ :\ 1;\ \ \ \ \ \ \ \textcolor{comment}{//\ 1:\ command,\ 0:\ control}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00080}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a1a5aaa930940857f68f245eeb89506b5}{00080}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a1a5aaa930940857f68f245eeb89506b5}{command}};\ \ \ \ \ \textcolor{comment}{//\ ATA\ command}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00081}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_ac8a01620bea3f0b5d7c4df374e1c8747}{00081}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_ac8a01620bea3f0b5d7c4df374e1c8747}{featurel}};\ \ \ \ \textcolor{comment}{//\ feature\ low}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00082}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a4d37bb385b2335b413564d27fd70b540}{00082}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a4d37bb385b2335b413564d27fd70b540}{lba0}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ LBA\ low\ byte}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00083}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_ac304bc04b42911d40f4f2c72c9874a86}{00083}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_ac304bc04b42911d40f4f2c72c9874a86}{lba1}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ LBA\ mid\ byte}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00084}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a2a83e1f9d697fda069699cac7ada6aa9}{00084}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a2a83e1f9d697fda069699cac7ada6aa9}{lba2}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ LBA\ high\ byte}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00085}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a2376f17d1e7367401184b2a3978bcd3a}{00085}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a2376f17d1e7367401184b2a3978bcd3a}{device}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00086}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a88941bc1671b5fe35dc2a56fab1b06c9}{00086}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a88941bc1671b5fe35dc2a56fab1b06c9}{lba3}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ LBA\ byte\ 3}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00087}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a35586c129650892e7d4a6c9873f3d0b7}{00087}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a35586c129650892e7d4a6c9873f3d0b7}{lba4}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ LBA\ byte\ 4}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00088}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a7fe42d2d7b97b74048b192a186ddd18a}{00088}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a7fe42d2d7b97b74048b192a186ddd18a}{lba5}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ LBA\ byte\ 5}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00089}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a69928a1c46cc71c43aefcdf268b12ee8}{00089}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a69928a1c46cc71c43aefcdf268b12ee8}{featureh}};\ \ \ \ \textcolor{comment}{//\ feature\ high}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00090}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_aba2096703359318cdd1e89c73ca1ab41}{00090}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_aba2096703359318cdd1e89c73ca1ab41}{countl}};\ \ \ \ \ \ \textcolor{comment}{//\ sector\ count\ low}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00091}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a504a9fe5ed439d47db5fe53f2a749fd3}{00091}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a504a9fe5ed439d47db5fe53f2a749fd3}{counth}};\ \ \ \ \ \ \textcolor{comment}{//\ sector\ count\ high}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00092}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a8617e0fef3725e58934abede60a1c969}{00092}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_a8617e0fef3725e58934abede60a1c969}{icc}};\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ISO\ command\ completion}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00093}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_ae11ecbd546ec0301d5462df23b139816}{00093}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_ae11ecbd546ec0301d5462df23b139816}{control}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00094}\mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_aa2fea940b63ec41d4edd28ba75e3bca0}{00094}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{struct___f_i_s___r_e_g___h2_d_aa2fea940b63ec41d4edd28ba75e3bca0}{rsv1}}[4];}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00095}\mbox{\hyperlink{ahci_8h_a0f1c04900c6ce6d9e1bd2487672f1dd5}{00095}}\ \}\ \mbox{\hyperlink{ahci_8h_a0f1c04900c6ce6d9e1bd2487672f1dd5}{FIS\_REG\_H2D}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00098}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y}{00098}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y}{\_HBA\_PRDT\_ENTRY}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00099}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a3d44ae193b9ea434ad6a7487abc2f82e}{00099}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a3d44ae193b9ea434ad6a7487abc2f82e}{dba}};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Data\ base\ address}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00100}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a0e1f5c6f210d66855938dffc753d156b}{00100}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a0e1f5c6f210d66855938dffc753d156b}{dbau}};\ \ \ \ \ \ \textcolor{comment}{//\ Data\ base\ address\ upper\ 32\ bits}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00101}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_ae09be11ca919ba207e66f2dc574125eb}{00101}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_ae09be11ca919ba207e66f2dc574125eb}{rsv0}};\ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00103}00103\ \ \ \ \ \textcolor{comment}{//\ DW3}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00104}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a017ed0d59352e94362de2a11c289a5ef}{00104}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a017ed0d59352e94362de2a11c289a5ef}{dbc}}\ :\ 22;\ \ \ \ \ \ \ \textcolor{comment}{//\ Byte\ count,\ 4M\ max}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00105}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a815e2cd61a2dcdf08fcbe28120d938f8}{00105}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a815e2cd61a2dcdf08fcbe28120d938f8}{rsv1}}\ :\ 9;\ \ \ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00106}\mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a752abcfe7ce5874cd9e8012a0346a37b}{00106}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___p_r_d_t___e_n_t_r_y_a752abcfe7ce5874cd9e8012a0346a37b}{i}}\ :\ 1;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Interrupt\ on\ completionn}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00107}\mbox{\hyperlink{ahci_8h_a8769db470fc28c8771fa46d2dfd5ad5e}{00107}}\ \}\ \mbox{\hyperlink{ahci_8h_a8769db470fc28c8771fa46d2dfd5ad5e}{HBA\_PRDT\_ENTRY}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00110}\mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l}{00110}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l}{\_HBA\_CMD\_TBL}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00111}00111\ \ \ \ \ \textcolor{comment}{//\ 0x00}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00112}\mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_a9ca6c851fa9b7745bf24b2104d25ed88}{00112}}\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_a9ca6c851fa9b7745bf24b2104d25ed88}{cfis}}[64];\ \ \textcolor{comment}{//\ Command\ FIS}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00114}00114\ \ \ \ \ \textcolor{comment}{//\ 0x40}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00115}\mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_ac9357952ae6c057602ffafb0e7bf943a}{00115}}\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_ac9357952ae6c057602ffafb0e7bf943a}{acmd}}[16];\ \ \textcolor{comment}{//\ ATAPI\ command,\ 12\ or\ 16\ bytes}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00117}00117\ \ \ \ \ \textcolor{comment}{//\ 0x50}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00118}\mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_ae269148be4884d524452e46802f4d41a}{00118}}\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_ae269148be4884d524452e46802f4d41a}{rsv}}[48];\ \ \ \ \textcolor{comment}{//\ Reserved}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00120}00120\ \ \ \ \ \textcolor{comment}{//\ 0x80}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00121}\mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_ae306eace4b0328a382c88e13c1d2bbc3}{00121}}\ \ \ \ \ \mbox{\hyperlink{ahci_8h_a8769db470fc28c8771fa46d2dfd5ad5e}{HBA\_PRDT\_ENTRY}}\ \ \ \ \mbox{\hyperlink{struct___h_b_a___c_m_d___t_b_l_ae306eace4b0328a382c88e13c1d2bbc3}{prdt\_entry}}[1];\ \ \ \ \textcolor{comment}{//\ Physical\ region\ descriptor\ table\ entries,\ 0\ \string~\ 65535}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00122}\mbox{\hyperlink{ahci_8h_a5fd38edf79dcde4ab4b729353f99b837}{00122}}\ \}\ \mbox{\hyperlink{ahci_8h_a5fd38edf79dcde4ab4b729353f99b837}{HBA\_CMD\_TBL}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00123}00123\ \textcolor{preprocessor}{\#pragma\ pack(pop)}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00128}\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r}{00128}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r}{\_HBA\_CMD\_HEADER}}\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00129}\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_af8bcd27b6688a18fe21bb86b2e8f9231}{00129}}\ \ \ \ \ \textcolor{keyword}{volatile}\ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_af8bcd27b6688a18fe21bb86b2e8f9231}{dw0}};\ \ \ \ \ \textcolor{comment}{//\ control\ flags\ +\ PRDTL}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00130}\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_ac8d39c461915c7810aba1d549a0309aa}{00130}}\ \ \ \ \ \textcolor{keyword}{volatile}\ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_ac8d39c461915c7810aba1d549a0309aa}{prdbc}};\ \ \ \textcolor{comment}{//\ physical\ region\ descriptor\ byte\ count\ transferred}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00131}\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_a7b9e83f2a21a5acc68d70b04b012d6d2}{00131}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_a7b9e83f2a21a5acc68d70b04b012d6d2}{ctba}};\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ command\ table\ base\ address\ (lower)}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00132}\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_a0fb060abb54a57da672c1fd9603e0c12}{00132}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_a0fb060abb54a57da672c1fd9603e0c12}{ctbau}};\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ command\ table\ base\ address\ upper}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00133}\mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_adf15f1545d1adc392cf2997954b65316}{00133}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___h_b_a___c_m_d___h_e_a_d_e_r_adf15f1545d1adc392cf2997954b65316}{rsv1}}[4];\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reserved}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00134}\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{00134}}\ \}\ \mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00135}00135\ \textcolor{preprocessor}{\#ifndef\ \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00136}00136\ \textcolor{keyword}{\_Static\_assert}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}})\ ==\ 32,\ \textcolor{stringliteral}{"{}SIZEOF\ HBA\_CMD\_HEADER\ ISNT\ 32\ BYTES!\ -\/-\/\ Misalignment\ check."{}});}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00137}00137\ \textcolor{keyword}{\_Static\_assert}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{ahci_8h_a8769db470fc28c8771fa46d2dfd5ad5e}{HBA\_PRDT\_ENTRY}})\ ==\ 16,\ \textcolor{stringliteral}{"{}PRDT\ must\ be\ 16\ bytes"{}});}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00138}00138\ \textcolor{keyword}{\_Static\_assert}(offsetof(\mbox{\hyperlink{ahci_8h_a5fd38edf79dcde4ab4b729353f99b837}{HBA\_CMD\_TBL}},\ prdt\_entry)\ ==\ 0x80,\ \textcolor{stringliteral}{"{}PRDT\ must\ start\ at\ offset\ 0x80\ in\ CMD\_TBL"{}});}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00139}00139\ \textcolor{keyword}{\_Static\_assert}(\textcolor{keyword}{sizeof}(((\mbox{\hyperlink{ahci_8h_a5fd38edf79dcde4ab4b729353f99b837}{HBA\_CMD\_TBL}}*)0)-\/>cfis)\ ==\ 64,\ \textcolor{stringliteral}{"{}cfis\ must\ be\ 64\ bytes"{}});}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00140}00140\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00141}00141\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00142}00142\ \textcolor{comment}{//\ AHCI\ Driver\ API}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00144}00144\ \textcolor{comment}{//\ Bit\ masks\ /\ helpers\ for\ dw0}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00145}00145\ \textcolor{comment}{//\ Bit\ masks\ /\ helpers\ for\ dw0}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00146}\mbox{\hyperlink{ahci_8h_afcbe924066770f5d256a33844b025b7c}{00146}}\ \textcolor{preprocessor}{\#define\ HBA\_CMD\_HDR\_CFL\_MASK\ \ \ \ 0x0000001Fu}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00147}\mbox{\hyperlink{ahci_8h_a04a41537b78cc7d001f0bd3d7ab8c128}{00147}}\ \textcolor{preprocessor}{\#define\ HBA\_CMD\_HDR\_A\_BIT\ \ \ \ \ \ \ (1u\ <<\ 5)}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00148}\mbox{\hyperlink{ahci_8h_a87dbf9891f22826ca2ea49a15ffa1970}{00148}}\ \textcolor{preprocessor}{\#define\ HBA\_CMD\_HDR\_W\_BIT\ \ \ \ \ \ \ (1u\ <<\ 6)}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00149}\mbox{\hyperlink{ahci_8h_a8f20d55237d7e3a47c713c5d2f213b92}{00149}}\ \textcolor{preprocessor}{\#define\ HBA\_CMD\_HDR\_P\_BIT\ \ \ \ \ \ \ (1u\ <<\ 7)}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00150}\mbox{\hyperlink{ahci_8h_aeac0a4430e414f081873b9da624177a5}{00150}}\ \textcolor{preprocessor}{\#define\ HBA\_CMD\_HDR\_PRDTL\_MASK\ \ 0xFFFF0000u}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00151}\mbox{\hyperlink{ahci_8h_a5746c8932d211d3f98c423b006c71961}{00151}}\ \textcolor{preprocessor}{\#define\ ATA\_DEV\_BSY\ 0x80\ }\textcolor{comment}{//\ Busy}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00152}\mbox{\hyperlink{ahci_8h_af12bdbc024458d3a760650e93bc32cb3}{00152}}\ \textcolor{preprocessor}{\#define\ ATA\_DEV\_DRQ\ 0x08\ }\textcolor{comment}{//\ Data\ Request}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00153}\mbox{\hyperlink{ahci_8h_a91ba1648e81b1642a471984d44c04cc5}{00153}}\ \textcolor{preprocessor}{\#define\ ATA\_DEV\_ERR\ 0x01\ }\textcolor{comment}{//\ Error}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00155}\mbox{\hyperlink{ahci_8h_a38dd4451240fdf39ed56148f148e9ffd}{00155}}\ \textcolor{preprocessor}{\#define\ ATA\_CMD\_READ\_DMA\_EX\ \ \ \ \ 0x25}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00156}\mbox{\hyperlink{ahci_8h_aad07fe181bd03623b039bca75664ec29}{00156}}\ \textcolor{preprocessor}{\#define\ ATA\_CMD\_WRITE\_DMA\_EX\ \ \ \ 0x35}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00158}\mbox{\hyperlink{ahci_8h_a70cb9cf6f5592304658efff34c009d0f}{00158}}\ \textcolor{preprocessor}{\#define\ AHCI\_DEV\_NULL\ 0}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00159}\mbox{\hyperlink{ahci_8h_a528bf8cf48a25cbb5faf1b47aa41469c}{00159}}\ \textcolor{preprocessor}{\#define\ AHCI\_DEV\_SATA\ 1}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00160}\mbox{\hyperlink{ahci_8h_a252890fb3343fb24494794f3f2c33a92}{00160}}\ \textcolor{preprocessor}{\#define\ AHCI\_DEV\_SEMB\ 2}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00161}\mbox{\hyperlink{ahci_8h_a388f0e67c6bf032307b8e8192bf07c47}{00161}}\ \textcolor{preprocessor}{\#define\ AHCI\_DEV\_PM\ \ \ 3}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00162}\mbox{\hyperlink{ahci_8h_af14cd62b8394e7284ed7880e9a6cd379}{00162}}\ \textcolor{preprocessor}{\#define\ AHCI\_DEV\_SATAPI\ 4}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00164}\mbox{\hyperlink{ahci_8h_a7799cbde4e99b339a61cb79ba018ed78}{00164}}\ \textcolor{preprocessor}{\#define\ HBA\_PORT\_IPM\_ACTIVE\ 1}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00165}\mbox{\hyperlink{ahci_8h_ad35e9d10e89ce48bf4f0e94929664102}{00165}}\ \textcolor{preprocessor}{\#define\ HBA\_PORT\_DET\_PRESENT\ 3}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00166}00166\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00167}\mbox{\hyperlink{ahci_8h_a469ab8af9bf8f1f89a5c8f79b2305e34}{00167}}\ \textcolor{preprocessor}{\#define\ HBA\_PxCMD\_ST\ \ \ \ 0x0001}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00168}\mbox{\hyperlink{ahci_8h_a27978dd2aac599cbd0330c923652c6e4}{00168}}\ \textcolor{preprocessor}{\#define\ HBA\_PxCMD\_FRE\ \ \ 0x0010}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00169}\mbox{\hyperlink{ahci_8h_a93f2b1904299d4d1920e65039ff7ce5c}{00169}}\ \textcolor{preprocessor}{\#define\ HBA\_PxCMD\_FR\ \ \ \ 0x4000}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00170}\mbox{\hyperlink{ahci_8h_ad2550f8f63fa32140f93da1b95354cf6}{00170}}\ \textcolor{preprocessor}{\#define\ HBA\_PxCMD\_CR\ \ \ \ 0x8000}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00171}\mbox{\hyperlink{ahci_8h_a11add414188662b170c68ead95a786d8}{00171}}\ \textcolor{preprocessor}{\#define\ HBA\_PxIS\_TFES\ \ \ (1\ <<\ 30)\ \ \ \ \ \ \ }\textcolor{comment}{/*\ TFES\ -\/\ Task\ File\ Error\ Status\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00173}00173\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ hba\_cmd\_hdr\_set\_cfl(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}}*\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}},\ uint32\_t\ cfl)\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00174}00174\ \ \ \ \ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ =\ (\mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ \&\ \mbox{\hyperlink{ahci_8h_afcbe924066770f5d256a33844b025b7c}{\string~HBA\_CMD\_HDR\_CFL\_MASK}})\ |\ ((cfl)\&\mbox{\hyperlink{ahci_8h_afcbe924066770f5d256a33844b025b7c}{HBA\_CMD\_HDR\_CFL\_MASK}});}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00175}00175\ \}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00176}00176\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ uint32\_t\ hba\_cmd\_hdr\_get\_cfl(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}}*\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}})\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00177}00177\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ \&\ \mbox{\hyperlink{ahci_8h_afcbe924066770f5d256a33844b025b7c}{HBA\_CMD\_HDR\_CFL\_MASK}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00178}00178\ \}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00180}00180\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ hba\_cmd\_hdr\_set\_w(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}}*\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}},\ \textcolor{keywordtype}{int}\ w)\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00181}00181\ \ \ \ \ \textcolor{keywordflow}{if}\ (w)\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ |=\ \mbox{\hyperlink{ahci_8h_a87dbf9891f22826ca2ea49a15ffa1970}{HBA\_CMD\_HDR\_W\_BIT}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00182}00182\ \ \ \ \ \textcolor{keywordflow}{else}\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ \&=\ \mbox{\hyperlink{ahci_8h_a87dbf9891f22826ca2ea49a15ffa1970}{\string~HBA\_CMD\_HDR\_W\_BIT}};}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00183}00183\ \}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00184}00184\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ hba\_cmd\_hdr\_get\_w(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}}*\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}})\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00185}00185\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ \&\ \mbox{\hyperlink{ahci_8h_a87dbf9891f22826ca2ea49a15ffa1970}{HBA\_CMD\_HDR\_W\_BIT}})\ ?\ 1\ :\ 0;}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00186}00186\ \}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00188}00188\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ hba\_cmd\_hdr\_set\_prdtl(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}}*\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}},\ uint32\_t\ prdtl)\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00189}00189\ \ \ \ \ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ =\ (\mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ \&\ \mbox{\hyperlink{ahci_8h_aeac0a4430e414f081873b9da624177a5}{\string~HBA\_CMD\_HDR\_PRDTL\_MASK}})\ |\ (((prdtl)\ \&\ 0xFFFFu)\ <<\ 16);}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00190}00190\ \}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00191}00191\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ uint32\_t\ hba\_cmd\_hdr\_get\_prdtl(\mbox{\hyperlink{ahci_8h_aa42f2e54bb5ba9a97507d17ac6203e06}{HBA\_CMD\_HEADER}}*\ \mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}})\ \{}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00192}00192\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{mh_8h_aa78b7e5ae96e539a1ddf315be3f59f67}{h}}-\/>dw0\ >>\ 16)\ \&\ 0xFFFFu;}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00193}00193\ \}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00195}00195\ \textcolor{comment}{/*\ Uncomment\ to\ see\ AHCI\ Debug\ Prints\ */}}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00198}00198\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00203}00203\ \mbox{\hyperlink{mtstatus_8h_a7c794b38d203a5b842f27b12fb55495a}{MTSTATUS}}\ \mbox{\hyperlink{ahci_8h_a237a75df76bac12d7652004b7f579692}{ahci\_init}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00212}00212\ \mbox{\hyperlink{mtstatus_8h_a7c794b38d203a5b842f27b12fb55495a}{MTSTATUS}}\ \mbox{\hyperlink{ahci_8h_ace09d7c971766cc2b7aba7c06032f781}{ahci\_read\_sector}}(\mbox{\hyperlink{block_8h_a1e03bdef1501e96036b676dc18e71787}{BLOCK\_DEVICE}}*\ dev,\ uint32\_t\ lba,\ \textcolor{keywordtype}{void}*\ buf,\ \textcolor{keywordtype}{size\_t}\ bytes);}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00221}00221\ \mbox{\hyperlink{mtstatus_8h_a7c794b38d203a5b842f27b12fb55495a}{MTSTATUS}}\ \mbox{\hyperlink{ahci_8h_a71a8e835dddd5b57babc5f00de3e0623}{ahci\_write\_sector}}(\mbox{\hyperlink{block_8h_a1e03bdef1501e96036b676dc18e71787}{BLOCK\_DEVICE}}*\ dev,\ uint32\_t\ lba,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ buf,\ \textcolor{keywordtype}{size\_t}\ bytes);}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00228}00228\ \mbox{\hyperlink{block_8h_a1e03bdef1501e96036b676dc18e71787}{BLOCK\_DEVICE}}*\ \mbox{\hyperlink{ahci_8h_a155325b891cfe68e3e74735a8f304702}{ahci\_get\_block\_device}}(\textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{ahci_8h_source_l00230}00230\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

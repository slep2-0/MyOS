\doxysection{isr.\+c}
\hypertarget{isr_8c_source}{}\label{isr_8c_source}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/core/mh/isr.c@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/core/mh/isr.c}}
\mbox{\hyperlink{isr_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00002}00002\ \textcolor{comment}{\ *\ PROJECT:\ \ \ \ \ MatanelOS\ Kernel}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00003}00003\ \textcolor{comment}{\ *\ LICENSE:\ \ \ \ \ NONE}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00004}00004\ \textcolor{comment}{\ *\ PURPOSE:\ \ \ \ \ IMPLEMENTATION\ To\ SETUP\ ISR\ Handler.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00005}00005\ \textcolor{comment}{\ *\ EXPLANATION:\ An\ ISR\ is\ what\ handles\ the\ interrupts\ that\ gets\ sent\ from\ the\ CPU\ (after\ interrupt\ is\ sent\ to\ ISR\ itself),\ it\ will\ do\ stuff\ based\ if\ it's\ an\ exception,\ or\ a\ normal\ interrupt.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00006}00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{core_8h}{../../includes/core.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mh_8h}{../../includes/mh.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mg_8h}{../../includes/mg.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{me_8h}{../../includes/me.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{assert_8h}{../../assert.h}}"{}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00014}00014\ \textcolor{keyword}{extern}\ \mbox{\hyperlink{efi_8h_a76f436ea56fd593cab07a6800d630828}{GOP\_PARAMS}}\ \mbox{\hyperlink{bugcheck_8c_ad8ca0be32b831aec9de80bcf0e22107e}{gop\_local}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00016}\mbox{\hyperlink{isr_8c_ab9b45563a6b3c0f9e83289c9ef86c9e2}{00016}}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{isr_8c_ab9b45563a6b3c0f9e83289c9ef86c9e2}{has\_error\_code}}[]\ =\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00017}00017\ \ \ \ \ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{comment}{//\ 0-\/7}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00018}00018\ \ \ \ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{false},\ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{true},\ \ \textcolor{keyword}{false},\ \textcolor{comment}{//\ 8-\/15}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00019}00019\ \ \ \ \ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{comment}{//\ 16-\/23}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00020}00020\ \ \ \ \ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false}\ \ \textcolor{comment}{//\ 24-\/31}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00021}00021\ \};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00023}00023\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{isr_8c_a5c673232a19d0c4e78792208eb62f0cc}{lapic\_eoi}}(\textcolor{keywordtype}{void});\ \ \ \ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00025}00025\ \mbox{\hyperlink{annotations_8h_abcd0a22ee4346cad5706adb6d2119429}{USED}}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00026}00026\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00027}\mbox{\hyperlink{isr_8c_a56769aa03c32d086350d6c1dab863d41}{00027}}\ \mbox{\hyperlink{isr_8c_a56769aa03c32d086350d6c1dab863d41}{MhHandleInterrupt}}\ (}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00028}00028\ \ \ \ \ \mbox{\hyperlink{annotations_8h_ac2bbd6d630a06a980d9a92ddb9a49928}{IN}}\ \ \textcolor{keywordtype}{int}\ vec\_num,\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00029}00029\ \ \ \ \ \mbox{\hyperlink{annotations_8h_ac2bbd6d630a06a980d9a92ddb9a49928}{IN}}\ \ \mbox{\hyperlink{core_8h_aa67765a45c59a875c081a07037408850}{PTRAP\_FRAME}}\ trap}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00030}00030\ )\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00032}00032\ \textcolor{comment}{/*++}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00033}00033\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00034}00034\ \textcolor{comment}{\ \ \ \ Routine\ description\ :\ This\ function\ handles\ all\ traps,\ exceptions,\ and\ interrupts\ of\ the\ processor,\ and\ forwards\ them\ to\ the\ appropriate\ function.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00035}00035\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00036}00036\ \textcolor{comment}{\ \ \ \ Arguments:}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00037}00037\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00038}00038\ \textcolor{comment}{\ \ \ \ \ \ \ \ [IN]\ \ \ \ int\ vec\_num:\ Vector\ number\ that\ represents\ the\ interrupt.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00039}00039\ \textcolor{comment}{\ \ \ \ \ \ \ \ [IN]\ \ \ \ PTRAP\_FRAME\ trap:\ Pointer\ to\ trap\ frame,\ saved\ by\ the\ stub.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00040}00040\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00041}00041\ \textcolor{comment}{\ \ \ \ Return\ Values:}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00042}00042\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00043}00043\ \textcolor{comment}{\ \ \ \ \ \ \ \ None.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00044}00044\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00045}00045\ \textcolor{comment}{-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00047}00047\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00049}00049\ \ \ \ \ \mbox{\hyperlink{assert_8h_a3d4ae9c092e117c836f52dc7d7cee574}{assert}}(\mbox{\hyperlink{irql_8c_a554f81fa12d240c84d378dae18ae4da6}{MeAreInterruptsEnabled}}()\ ==\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00051}00051\ \ \ \ \ \mbox{\hyperlink{core_8h_a70c4f07737f0f901b6b34b4655c9ee42}{PPROCESSOR}}\ cpu\ =\ \mbox{\hyperlink{me_8h_ad67c53006a896cba38c6eabe92a0ad91}{MeGetCurrentProcessor}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00052}00052\ \ \ \ \ \mbox{\hyperlink{core_8h_a7258ea91cea6c1c174df48f6225ef4da}{IRQL}}\ oldIrql;}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00053}00053\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00054}00054\ \ \ \ \ \textcolor{comment}{//\ Save\ if\ the\ scheduler\ was\ enabled\ or\ not\ before\ raising\ to\ >=\ DISPATCH\_LEVEL\ (because\ in\ dispatch\_level\ and\ above\ the\ scheduler\ gets\ disabled\ to\ disable\ pre-\/emption)}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00055}00055\ \ \ \ \ \textcolor{keywordtype}{bool}\ schedulerEnabled\ =\ cpu-\/>\mbox{\hyperlink{struct___p_r_o_c_e_s_s_o_r_a18064996902c47642fa42faed7fbb9d5}{schedulerEnabled}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00057}00057\ \ \ \ \ \textcolor{comment}{//\ Save\ the\ PreviousMode\ to\ current\ thread.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00058}00058\ \ \ \ \ \mbox{\hyperlink{mm_8h_a77677400417c8f39bbed431515099ee7}{PRIVILEGE\_MODE}}\ PreviousMode;}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00060}00060\ \ \ \ \ \textcolor{keywordflow}{if}\ ((trap-\/>cs\ \&\ 0x3)\ ==\ 0x3)\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ PreviousMode\ =\ \mbox{\hyperlink{mm_8h_afab0c0666e21abd2ffdc8ceb5be3f498adcfc57d389e8e2bb30dc32135b6a92d0}{UserMode}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00062}00062\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00063}00063\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ PreviousMode\ =\ \mbox{\hyperlink{mm_8h_afab0c0666e21abd2ffdc8ceb5be3f498ab76e1d872ad43cb76d21124abdd4312a}{KernelMode}};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00065}00065\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00066}00066\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00067}00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (cpu-\/>\mbox{\hyperlink{struct___p_r_o_c_e_s_s_o_r_a72c283f2e250f09a8c30eed9bd218460}{currentThread}})\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00068}00068\ \ \ \ \ \ \ \ \ cpu-\/>\mbox{\hyperlink{struct___p_r_o_c_e_s_s_o_r_a72c283f2e250f09a8c30eed9bd218460}{currentThread}}-\/>\mbox{\hyperlink{struct___i_t_h_r_e_a_d_a5fb3dca25a3058c66ba10d3f553e896d}{PreviousMode}}\ =\ PreviousMode;}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00069}00069\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00071}00071\ \ \ \ \ \textcolor{keywordflow}{switch}\ (vec\_num)\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00072}00072\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214ac5d77cf2c3a1a05e98d1ca488f448824}{EXCEPTION\_DIVIDE\_BY\_ZERO}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00073}00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_aca5a6c43b04aa4cd89d066bcfa8dd4a0}{MiDivideByZero}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00075}00075\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a34437286a5ca69c483131c8ee5c563a2}{EXCEPTION\_SINGLE\_STEP}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00076}00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a4ec953818fe18c54ce5199caec55e1e3}{MiDebugTrap}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00078}00078\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a5575f7b0beae8f5ed115245774a84629}{EXCEPTION\_NON\_MASKABLE\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_ac2693e834f0868b9b20355d551989dfe}{\_MeSetIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3ea179bd93cb26ad6988d9665bad27c0bbf}{HIGH\_LEVEL}});\ \textcolor{comment}{//\ Non\ Maskable\ Interrupt\ -\/\ basically\ when\ the\ CPU\ encounters\ a\ hardware\ fault,\ cannot\ be\ masked,\ very\ alarming.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a3a798c50f51be9ef287efb5ecce1895b}{MiNonMaskableInterrupt}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00082}00082\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214ad90595dbf7da7c1a90b1bb76cd426a77}{EXCEPTION\_BREAKPOINT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00083}00083\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a054b492479f9476e325523c588d24bf0}{MiBreakpoint}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00085}00085\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214acb5247bc169981abaf50b244e3ac7081}{EXCEPTION\_OVERFLOW}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00086}00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ade1c26a6731345f35bf1d1bd996d5637}{MiOverflow}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00088}00088\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214afd671ee236b6060386acc851ff037ae3}{EXCEPTION\_BOUNDS\_CHECK}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a21ece4d06870f2f50e1586a9865568a1}{MiBoundsCheck}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00091}00091\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a28557d1f02680259d9ed8b1dd9f86c91}{EXCEPTION\_INVALID\_OPCODE}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00092}00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a66f06653ecb6fa64e6ece2b261156eaa}{MiInvalidOpcode}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00094}00094\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214aa12c9ea7b6ded404e6d2084f1abbe4a7}{EXCEPTION\_NO\_COPROCESSOR}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00095}00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a1047c22886d4bbf2a7e7caae7346f50d}{MiNoCoprocessor}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00096}00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00097}00097\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a6f0ec56ae735aee3ab6f847eaac35c12}{EXCEPTION\_DOUBLE\_FAULT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00098}00098\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_ac2693e834f0868b9b20355d551989dfe}{\_MeSetIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3ea179bd93cb26ad6988d9665bad27c0bbf}{HIGH\_LEVEL}});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00099}00099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a90834181d8dd59de70d4ffb713e223bb}{MiDoubleFault}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00100}00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00101}00101\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214ab9c9591e09e612b99b1f4b3ed4baac56}{EXCEPTION\_COPROCESSOR\_SEGMENT\_OVERRUN}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00102}00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a85422129cf7529d518485445bb068847}{MiCoprocessorSegmentOverrun}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00104}00104\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214aab7c1bc6a85b1bb7a169c4a9ec74fe1b}{EXCEPTION\_SEGMENT\_SELECTOR\_NOTPRESENT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00105}00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_af62de2896e41a8218bb2f8f7822487ec}{MiSegmentSelectorNotPresent}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00107}00107\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a167bd7d866af5dcb76bf161e19289791}{EXCEPTION\_INVALID\_TSS}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a636b9e3e1077c5143b6d589e88a062b0}{MiInvalidTss}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00110}00110\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214aabd2df61deb5496cb463a88a8191121f}{EXCEPTION\_GENERAL\_PROTECTION\_FAULT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_abbb131baf26462fbcd50d9c004d14e7a}{MiGeneralProtectionFault}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214ade46737499822de31e31ff98231d0c81}{EXCEPTION\_PAGE\_FAULT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00114}00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a8d50d37b7978b26e5fa59ca331097235}{MiPageFault}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00116}00116\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214aaa31477a0c9d066d153450fe17da1a99}{EXCEPTION\_RESERVED}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00117}00117\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reserved,\ do\ not\ use.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00118}00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00119}00119\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a0bf33f61d31bd770d084aafaa448804a}{EXCEPTION\_FLOATING\_POINT\_ERROR}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00120}00120\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ad93a9d1dc5b4b7e350832aebee57e9b3}{MiFloatingPointError}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00122}00122\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214ad4b5e8f2517bdaca4e4e1493ce8a8723}{EXCEPTION\_ALIGNMENT\_CHECK}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00123}00123\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a47ea4d7744cfe039135ccd894de52f97}{MiAlignmentCheck}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00124}00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00125}00125\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_a4852689eeafee74c009c94108fce7214a2e45e5a1b0d6c7808955edb00a32b730}{EXCEPTION\_SEVERE\_MACHINE\_CHECK}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00126}00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_ac2693e834f0868b9b20355d551989dfe}{\_MeSetIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3ea179bd93cb26ad6988d9665bad27c0bbf}{HIGH\_LEVEL}});\ \textcolor{comment}{//\ machine\ check,\ like\ NMI,\ high\ irql.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00127}00127\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_a877b76ed3acfb98a78dc91c97fcf3b00}{MiMachineCheck}}(trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00128}00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00129}00129\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_ab824659c51a6e5646465e02d7e50705faf382444ac68b3772041ec70af01a46bf}{LAPIC\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00130}00130\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a42f92f7a0268fd7a4fab017deabb8fcf}{MeRaiseIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3ea9562f0a4b039e529f5e7a949b6afc3fd}{CLOCK\_LEVEL}},\ \&oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_aa1a90154eaea0af9608b87626497ad27}{MiLapicInterrupt}}(schedulerEnabled,\ trap);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00132}00132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_ad07e05df3c335028a1b5ff02de7f3ef2}{MeLowerIrql}}(oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00133}00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00134}00134\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_aa4698327d4b2a5ddf6533de46d57c49e}{VECTOR\_IPI}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00135}00135\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a42f92f7a0268fd7a4fab017deabb8fcf}{MeRaiseIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3ea901304439d70b3e35dd6eaa57644f524}{IPI\_LEVEL}},\ \&oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00136}00136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{handlers_8c_ae08944131b30ed5db94bdbfa32abacf0}{MiInterprocessorInterrupt}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00137}00137\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{isr_8c_a5c673232a19d0c4e78792208eb62f0cc}{lapic\_eoi}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00138}00138\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_ad07e05df3c335028a1b5ff02de7f3ef2}{MeLowerIrql}}(oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00139}00139\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00140}00140\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_aa6389ca3cc6d1d118e8916b7df10af6e}{VECTOR\_DPC}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ To\ see\ how\ is\ this\ triggered,\ check\ MeInsertQueueDpc\ or\ MeLowerIrql}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00142}00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{assert_8h_a3d4ae9c092e117c836f52dc7d7cee574}{assert}}(\mbox{\hyperlink{irql_8c_a554f81fa12d240c84d378dae18ae4da6}{MeAreInterruptsEnabled}}()\ ==\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Raise\ IRQL\ to\ DISPATCH\_LEVEL}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_a42f92f7a0268fd7a4fab017deabb8fcf}{MeRaiseIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3ea291292740ec80ec0ff8e2a70c5bdfd6f}{DISPATCH\_LEVEL}},\ \&oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00145}00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Drain\ DPCs\ while\ in\ DISPATCH}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00146}00146\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dpc_8c_a383e4ac532b21a123418732a52de9ad4}{MeRetireDPCs}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ EOI,\ this\ is\ called\ by\ the\ APIC\ Self\ BIT\ (so\ LAPIC)}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{isr_8c_a5c673232a19d0c4e78792208eb62f0cc}{lapic\_eoi}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Lower\ IRQL\ back.}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00150}00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{irql_8c_ad07e05df3c335028a1b5ff02de7f3ef2}{MeLowerIrql}}(oldIrql);}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00152}00152\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_ac906ecc46d8ec7bff1a926611d4a7499}{VECTOR\_APC}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00153}00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gop_8c_a41ff1165c1969706dadb5b409ae082e9}{gop\_printf}}(\mbox{\hyperlink{mg_8h_ad86358bf19927183dd7b4ae215a29731}{COLOR\_RED}},\ \textcolor{stringliteral}{"{}APC\ Vector\ hit.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00154}00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00155}00155\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{mh_8h_ab824659c51a6e5646465e02d7e50705fa69438209e687b8cdc26f5c31aa2e2e41}{LAPIC\_SIV\_INTERRUPT}}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ send\ EOI}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00157}00157\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{isr_8c_a5c673232a19d0c4e78792208eb62f0cc}{lapic\_eoi}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00158}00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00159}00159\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00160}00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00161}00161\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00163}00163\ \ \ \ \ \mbox{\hyperlink{assert_8h_a3d4ae9c092e117c836f52dc7d7cee574}{assert}}(\mbox{\hyperlink{irql_8c_a554f81fa12d240c84d378dae18ae4da6}{MeAreInterruptsEnabled}}()\ ==\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00164}00164\ \ \ \ \ \textcolor{comment}{//\ Send\ An\ EOI}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00165}00165\ \ \ \ \ \textcolor{comment}{//\ TODO\ KINTERRUPT}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00166}00166\ \}}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00168}\mbox{\hyperlink{isr_8c_a88ada49c1954d38252049786595d9a5f}{00168}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{isr_8c_a88ada49c1954d38252049786595d9a5f}{init\_interrupts}}()\ \{}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00169}00169\ \ \ \ \ \mbox{\hyperlink{idt_8c_a4acdc6d6294313b1aae6d032bb42bf2d}{install\_idt}}();}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00170}00170\ \ \ \ \ \mbox{\hyperlink{irql_8c_ac2693e834f0868b9b20355d551989dfe}{\_MeSetIrql}}(\mbox{\hyperlink{core_8h_a6ff101fd8adf1c79792d98893f8dee3eacf81bceb86f53bdf373ff56d5f6e179f}{PASSIVE\_LEVEL}});}
\DoxyCodeLine{\Hypertarget{isr_8c_source_l00171}00171\ \}}

\end{DoxyCode}

\doxysection{C\+:/\+Users/matanel/\+Desktop/\+Projects/\+Kernel\+Development/kernel/cpu/thread/thread.h File Reference}
\hypertarget{thread_8h}{}\label{thread_8h}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/cpu/thread/thread.h@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/cpu/thread/thread.h}}
{\ttfamily \#include "{}../cpu.\+h"{}}\newline
{\ttfamily \#include "{}../../memory/memory.\+h"{}}\newline
{\ttfamily \#include "{}../scheduler/scheduler.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{thread_8h_ad9ad78f43fbfa2bc82255072d0a42859}{THREAD\+\_\+\+DEFAULT\+\_\+\+STACK\+\_\+\+SIZE}}~4096
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}}
\begin{DoxyCompactList}\small\item\em These work the same as how windows does thread parameters, they just turn the parameter into 1 void\texorpdfstring{$\ast$}{*} ptr, and the function that handles it must turn it into it\textquotesingle{}s equivalent struct ptr. So essentially, you convert your struct ptr you want to call with the function into a void\texorpdfstring{$\ast$}{*} ptr (so THREAD\+\_\+\+PARAMETERS\texorpdfstring{$\ast$}{*}), and then use that and the function you use the thread on must convert it back. \end{DoxyCompactList}\item 
typedef void(\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{thread_8h_a72fcf929d51dce199593912ed4910ade}{Thread\+Entry}}) (\mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{thread_8h_af7b3da54472a3278ae58554e8ea10bdf}{Mt\+Create\+Thread}} (\mbox{\hyperlink{thread_8h_a72fcf929d51dce199593912ed4910ade}{Thread\+Entry}} entry, \mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}} parameter, \mbox{\hyperlink{cpu__types_8h_ab7ab7fc7e4a3c98260b673f2ab1ce210}{time\+Slice\+Ticks}} TIMESLICE, bool kernel\+Thread)
\begin{DoxyCompactList}\small\item\em Create a new thread with parameters. (if no parameters are supplied (NULL), it will be handled, so no worries) \end{DoxyCompactList}\item 
\mbox{\hyperlink{cpu__types_8h_ad4bfc71eef5e5a6bb0806753203c7a48}{Thread}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{thread_8h_a7f9170ee1211630dae69017a9c39f9e8}{Mt\+Get\+Current\+Thread}} (void)
\begin{DoxyCompactList}\small\item\em This function will return the current working thread. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-define-members}
\Hypertarget{thread_8h_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{thread_8h_ad9ad78f43fbfa2bc82255072d0a42859}\index{thread.h@{thread.h}!THREAD\_DEFAULT\_STACK\_SIZE@{THREAD\_DEFAULT\_STACK\_SIZE}}
\index{THREAD\_DEFAULT\_STACK\_SIZE@{THREAD\_DEFAULT\_STACK\_SIZE}!thread.h@{thread.h}}
\doxysubsubsection{\texorpdfstring{THREAD\_DEFAULT\_STACK\_SIZE}{THREAD\_DEFAULT\_STACK\_SIZE}}
{\footnotesize\ttfamily \label{thread_8h_ad9ad78f43fbfa2bc82255072d0a42859} 
\#define THREAD\+\_\+\+DEFAULT\+\_\+\+STACK\+\_\+\+SIZE~4096}



Definition at line \mbox{\hyperlink{thread_8h_source_l00014}{14}} of file \mbox{\hyperlink{thread_8h_source}{thread.\+h}}.



\label{doc-typedef-members}
\Hypertarget{thread_8h_doc-typedef-members}
\doxysubsection{Typedef Documentation}
\Hypertarget{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}\index{thread.h@{thread.h}!THREAD\_PARAMETER@{THREAD\_PARAMETER}}
\index{THREAD\_PARAMETER@{THREAD\_PARAMETER}!thread.h@{thread.h}}
\doxysubsubsection{\texorpdfstring{THREAD\_PARAMETER}{THREAD\_PARAMETER}}
{\footnotesize\ttfamily \label{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11} 
typedef void\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}}}



These work the same as how windows does thread parameters, they just turn the parameter into 1 void\texorpdfstring{$\ast$}{*} ptr, and the function that handles it must turn it into it\textquotesingle{}s equivalent struct ptr. So essentially, you convert your struct ptr you want to call with the function into a void\texorpdfstring{$\ast$}{*} ptr (so THREAD\+\_\+\+PARAMETERS\texorpdfstring{$\ast$}{*}), and then use that and the function you use the thread on must convert it back. 



Definition at line \mbox{\hyperlink{thread_8h_source_l00020}{20}} of file \mbox{\hyperlink{thread_8h_source}{thread.\+h}}.

\Hypertarget{thread_8h_a72fcf929d51dce199593912ed4910ade}\index{thread.h@{thread.h}!ThreadEntry@{ThreadEntry}}
\index{ThreadEntry@{ThreadEntry}!thread.h@{thread.h}}
\doxysubsubsection{\texorpdfstring{ThreadEntry}{ThreadEntry}}
{\footnotesize\ttfamily \label{thread_8h_a72fcf929d51dce199593912ed4910ade} 
typedef void(\texorpdfstring{$\ast$}{*} Thread\+Entry) (\mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}})}



Definition at line \mbox{\hyperlink{thread_8h_source_l00021}{21}} of file \mbox{\hyperlink{thread_8h_source}{thread.\+h}}.



\label{doc-func-members}
\Hypertarget{thread_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{thread_8h_af7b3da54472a3278ae58554e8ea10bdf}\index{thread.h@{thread.h}!MtCreateThread@{MtCreateThread}}
\index{MtCreateThread@{MtCreateThread}!thread.h@{thread.h}}
\doxysubsubsection{\texorpdfstring{MtCreateThread()}{MtCreateThread()}}
{\footnotesize\ttfamily \label{thread_8h_af7b3da54472a3278ae58554e8ea10bdf} 
void Mt\+Create\+Thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{thread_8h_a72fcf929d51dce199593912ed4910ade}{Thread\+Entry}}}]{entry}{, }\item[{\mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}}}]{parameter}{, }\item[{\mbox{\hyperlink{cpu__types_8h_ab7ab7fc7e4a3c98260b673f2ab1ce210}{time\+Slice\+Ticks}}}]{TIMESLICE}{, }\item[{bool}]{kernel\+Thread}{}\end{DoxyParamCaption})}



Create a new thread with parameters. (if no parameters are supplied (NULL), it will be handled, so no worries) 


\begin{DoxyParams}{Parameters}
{\em entry} & The entry point address. (usually a function, I don\textquotesingle{}t see any other use.)\\
\hline
{\em parameters} & The pointer to the parameters (passed as a pointer, the function itself must convert it back to its original parameter variable)\\
\hline
{\em kernel\+Thread} & Specificies if the thread should be a kernel one or not. (If not, it will setup a process, idk how I would implement it, when I\textquotesingle{}ll get on it) TODO\\
\hline
\end{DoxyParams}
TODO implement user mode.

For when we context switch (this is why cfm is in stack\+Top), set the registers to all 0. (since the stack for the thread holds the registers when we context switch)

Here comes the actual part that separates between the normal and Ex version of creating the thread. -\/ Remmber to use System V ABI as this is GCC.

Definition at line \mbox{\hyperlink{thread_8c_source_l00084}{84}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.

\Hypertarget{thread_8h_a7f9170ee1211630dae69017a9c39f9e8}\index{thread.h@{thread.h}!MtGetCurrentThread@{MtGetCurrentThread}}
\index{MtGetCurrentThread@{MtGetCurrentThread}!thread.h@{thread.h}}
\doxysubsubsection{\texorpdfstring{MtGetCurrentThread()}{MtGetCurrentThread()}}
{\footnotesize\ttfamily \label{thread_8h_a7f9170ee1211630dae69017a9c39f9e8} 
\mbox{\hyperlink{cpu__types_8h_ad4bfc71eef5e5a6bb0806753203c7a48}{Thread}} \texorpdfstring{$\ast$}{*} Mt\+Get\+Current\+Thread (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



This function will return the current working thread. 

\begin{DoxyReturn}{Returns}
Pointer to current \doxylink{cpu__types_8h_ad4bfc71eef5e5a6bb0806753203c7a48}{Thread} (struct)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{thread_8c_source_l00156}{156}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.


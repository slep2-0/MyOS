\doxysection{C\+:/\+Users/matanel/\+Desktop/\+Projects/\+Kernel\+Development/kernel/cpu/thread/thread.c File Reference}
\hypertarget{thread_8c}{}\label{thread_8c}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/cpu/thread/thread.c@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/cpu/thread/thread.c}}
{\ttfamily \#include "{}thread.\+h"{}}\newline
{\ttfamily \#include "{}../../bugcheck/bugcheck.\+h"{}}\newline
{\ttfamily \#include "{}../../assert.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{thread_8c_a380e61f9be3a2721fd83a3a0b07f4132}{MIN\+\_\+\+TID}}~4u
\item 
\#define \mbox{\hyperlink{thread_8c_af6bea0442249039ac2b6b3c250938c0c}{MAX\+\_\+\+TID}}~0x\+FFFFFFFCu
\item 
\#define \mbox{\hyperlink{thread_8c_a31452d15206784935051c52d5a78ff03}{ALIGN\+\_\+\+DELTA}}~4u
\item 
\#define \mbox{\hyperlink{thread_8c_a08150dd3f0ffc0e330a631dd728ea448}{MAX\+\_\+\+FREE\+\_\+\+POOL}}~1024u
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{thread_8c_af7b3da54472a3278ae58554e8ea10bdf}{Mt\+Create\+Thread}} (\mbox{\hyperlink{thread_8h_a72fcf929d51dce199593912ed4910ade}{Thread\+Entry}} entry, \mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}} parameter, \mbox{\hyperlink{cpu__types_8h_ab7ab7fc7e4a3c98260b673f2ab1ce210}{time\+Slice\+Ticks}} TIMESLICE, bool kernel\+Thread)
\begin{DoxyCompactList}\small\item\em Create a new thread with parameters. (if no parameters are supplied (NULL), it will be handled, so no worries) \end{DoxyCompactList}\item 
\mbox{\hyperlink{cpu__types_8h_ad4bfc71eef5e5a6bb0806753203c7a48}{Thread}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{thread_8c_a7f9170ee1211630dae69017a9c39f9e8}{Mt\+Get\+Current\+Thread}} (void)
\begin{DoxyCompactList}\small\item\em This function will return the current working thread. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{cpu__types_8h_a9bb4e76feb6dc6ad7a88c5a7cab56467}{CPU}} \mbox{\hyperlink{thread_8c_a0b2a3530e9a5998456be351b4251b878}{cpu}}
\end{DoxyCompactItemize}


\label{doc-define-members}
\Hypertarget{thread_8c_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{thread_8c_a31452d15206784935051c52d5a78ff03}\index{thread.c@{thread.c}!ALIGN\_DELTA@{ALIGN\_DELTA}}
\index{ALIGN\_DELTA@{ALIGN\_DELTA}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{ALIGN\_DELTA}{ALIGN\_DELTA}}
{\footnotesize\ttfamily \label{thread_8c_a31452d15206784935051c52d5a78ff03} 
\#define ALIGN\+\_\+\+DELTA~4u}



Definition at line \mbox{\hyperlink{thread_8c_source_l00007}{7}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.

\Hypertarget{thread_8c_a08150dd3f0ffc0e330a631dd728ea448}\index{thread.c@{thread.c}!MAX\_FREE\_POOL@{MAX\_FREE\_POOL}}
\index{MAX\_FREE\_POOL@{MAX\_FREE\_POOL}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{MAX\_FREE\_POOL}{MAX\_FREE\_POOL}}
{\footnotesize\ttfamily \label{thread_8c_a08150dd3f0ffc0e330a631dd728ea448} 
\#define MAX\+\_\+\+FREE\+\_\+\+POOL~1024u}



Definition at line \mbox{\hyperlink{thread_8c_source_l00008}{8}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.

\Hypertarget{thread_8c_af6bea0442249039ac2b6b3c250938c0c}\index{thread.c@{thread.c}!MAX\_TID@{MAX\_TID}}
\index{MAX\_TID@{MAX\_TID}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{MAX\_TID}{MAX\_TID}}
{\footnotesize\ttfamily \label{thread_8c_af6bea0442249039ac2b6b3c250938c0c} 
\#define MAX\+\_\+\+TID~0x\+FFFFFFFCu}



Definition at line \mbox{\hyperlink{thread_8c_source_l00006}{6}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.

\Hypertarget{thread_8c_a380e61f9be3a2721fd83a3a0b07f4132}\index{thread.c@{thread.c}!MIN\_TID@{MIN\_TID}}
\index{MIN\_TID@{MIN\_TID}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{MIN\_TID}{MIN\_TID}}
{\footnotesize\ttfamily \label{thread_8c_a380e61f9be3a2721fd83a3a0b07f4132} 
\#define MIN\+\_\+\+TID~4u}



Definition at line \mbox{\hyperlink{thread_8c_source_l00005}{5}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.



\label{doc-func-members}
\Hypertarget{thread_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{thread_8c_af7b3da54472a3278ae58554e8ea10bdf}\index{thread.c@{thread.c}!MtCreateThread@{MtCreateThread}}
\index{MtCreateThread@{MtCreateThread}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{MtCreateThread()}{MtCreateThread()}}
{\footnotesize\ttfamily \label{thread_8c_af7b3da54472a3278ae58554e8ea10bdf} 
void Mt\+Create\+Thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{thread_8h_a72fcf929d51dce199593912ed4910ade}{Thread\+Entry}}}]{entry}{, }\item[{\mbox{\hyperlink{thread_8h_ac97f2b26eaa411a9744e1be2fbc90c11}{THREAD\+\_\+\+PARAMETER}}}]{parameter}{, }\item[{\mbox{\hyperlink{cpu__types_8h_ab7ab7fc7e4a3c98260b673f2ab1ce210}{time\+Slice\+Ticks}}}]{TIMESLICE}{, }\item[{bool}]{kernel\+Thread}{}\end{DoxyParamCaption})}



Create a new thread with parameters. (if no parameters are supplied (NULL), it will be handled, so no worries) 


\begin{DoxyParams}{Parameters}
{\em entry} & The entry point address. (usually a function, I don\textquotesingle{}t see any other use.)\\
\hline
{\em parameters} & The pointer to the parameters (passed as a pointer, the function itself must convert it back to its original parameter variable)\\
\hline
{\em kernel\+Thread} & Specificies if the thread should be a kernel one or not. (If not, it will setup a process, idk how I would implement it, when I\textquotesingle{}ll get on it) TODO\\
\hline
\end{DoxyParams}
TODO implement user mode.

For when we context switch (this is why cfm is in stack\+Top), set the registers to all 0. (since the stack for the thread holds the registers when we context switch)

Here comes the actual part that separates between the normal and Ex version of creating the thread. -\/ Remmber to use System V ABI as this is GCC.

Definition at line \mbox{\hyperlink{thread_8c_source_l00084}{84}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.

\Hypertarget{thread_8c_a7f9170ee1211630dae69017a9c39f9e8}\index{thread.c@{thread.c}!MtGetCurrentThread@{MtGetCurrentThread}}
\index{MtGetCurrentThread@{MtGetCurrentThread}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{MtGetCurrentThread()}{MtGetCurrentThread()}}
{\footnotesize\ttfamily \label{thread_8c_a7f9170ee1211630dae69017a9c39f9e8} 
\mbox{\hyperlink{cpu__types_8h_ad4bfc71eef5e5a6bb0806753203c7a48}{Thread}} \texorpdfstring{$\ast$}{*} Mt\+Get\+Current\+Thread (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



This function will return the current working thread. 

\begin{DoxyReturn}{Returns}
Pointer to current \doxylink{cpu__types_8h_ad4bfc71eef5e5a6bb0806753203c7a48}{Thread} (struct)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{thread_8c_source_l00156}{156}} of file \mbox{\hyperlink{thread_8c_source}{thread.\+c}}.



\label{doc-var-members}
\Hypertarget{thread_8c_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{thread_8c_a0b2a3530e9a5998456be351b4251b878}\index{thread.c@{thread.c}!cpu@{cpu}}
\index{cpu@{cpu}!thread.c@{thread.c}}
\doxysubsubsection{\texorpdfstring{cpu}{cpu}}
{\footnotesize\ttfamily \label{thread_8c_a0b2a3530e9a5998456be351b4251b878} 
\mbox{\hyperlink{cpu__types_8h_a9bb4e76feb6dc6ad7a88c5a7cab56467}{CPU}} cpu\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{kernel_8c_source_l00023}{23}} of file \mbox{\hyperlink{kernel_8c_source}{kernel.\+c}}.


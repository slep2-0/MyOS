\doxysection{C\+:/\+Users/matanel/\+Desktop/\+Projects/\+Kernel\+Development/kernel/memory/paging/paging.c File Reference}
\hypertarget{paging_8c}{}\label{paging_8c}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/memory/paging/paging.c@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/memory/paging/paging.c}}
{\ttfamily \#include "{}paging.\+h"{}}\newline
{\ttfamily \#include "{}../../interrupts/idt.\+h"{}}\newline
{\ttfamily \#include "{}../memory.\+h"{}}\newline
{\ttfamily \#include "{}../../drivers/ahci/ahci.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{paging_8c_a04d95f827e85da8915a4eebff582a7be}{PAGE\+\_\+\+ENTRIES}}~512
\item 
\#define \mbox{\hyperlink{paging_8c_ae8f4eec8c194962159f36f934954d2a3}{PAGE\+\_\+\+SIZE\+\_\+4K}}~0x1000
\item 
\#define \mbox{\hyperlink{paging_8c_ae4aa620ce57c7c3171b916de2c5f09f2}{PAGE\+\_\+\+MASK}}~0x\+FFFULL
\item 
\#define \mbox{\hyperlink{paging_8c_add9fd0c9693ecc63a358073a5578ef23}{PAGE\+\_\+\+ALIGN\+\_\+\+DOWN}}(x)
\item 
\#define \mbox{\hyperlink{paging_8c_a4cbb7f0db5ee5430437a2617c2a0f410}{PAGE\+\_\+\+ALIGN\+\_\+\+UP}}(x)
\item 
\#define \mbox{\hyperlink{paging_8c_a4a6ba206104f470a098a0f5c161c2ce7}{RECURSIVE\+\_\+\+INDEX}}~0x1\+FF
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{paging_8c_a8a5e657a727356ab419f20fa707576d5}{map\+\_\+page}} (void \texorpdfstring{$\ast$}{*}virtualaddress, uintptr\+\_\+t physicaladdress, uint64\+\_\+t flags)
\item 
bool \mbox{\hyperlink{paging_8c_aa3ee992da567c2b694b9c148175ba07b}{unmap\+\_\+page}} (void \texorpdfstring{$\ast$}{*}virtualaddress)
\item 
void \mbox{\hyperlink{paging_8c_abbe37894b5dfd8416ec7d52d49b4b2cb}{set\+\_\+page\+\_\+writable}} (void \texorpdfstring{$\ast$}{*}virtualaddress, bool writable)
\item 
void \mbox{\hyperlink{paging_8c_a4eef2c9157893448c93129145533f449}{set\+\_\+page\+\_\+user\+\_\+access}} (void \texorpdfstring{$\ast$}{*}virtualaddress, bool user\+\_\+accessible)
\item 
void \mbox{\hyperlink{paging_8c_ad2e187bf95efccc510942190ab675a03}{Mt\+Add\+Page\+Flags}} (void \texorpdfstring{$\ast$}{*}virtualaddress, uint64\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em This function adds (doesn\textquotesingle{}t set) flags to the specified virtual address (if exists). This DOES NOT set flags! (Which means flags that are ON will stay ON and will not get rewritten) \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{paging_8c_aeed6cb9923e09f06a5e24339fb3dd62e}{Mt\+Is\+Address\+Valid}} (void \texorpdfstring{$\ast$}{*}virtual\+Addr)
\begin{DoxyCompactList}\small\item\em This function checks if the virtual address given to it, is valid and present in the page tables of the kernel. \end{DoxyCompactList}\item 
uintptr\+\_\+t \mbox{\hyperlink{paging_8c_a7359fbe284826fefffe68a4b13305e4f}{Mt\+Translate\+Virtual\+To\+Physical}} (void \texorpdfstring{$\ast$}{*}virtualaddress)
\begin{DoxyCompactList}\small\item\em This function translates the virtual address to its corresponding physical address in the page tables if present. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-define-members}
\Hypertarget{paging_8c_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{paging_8c_add9fd0c9693ecc63a358073a5578ef23}\index{paging.c@{paging.c}!PAGE\_ALIGN\_DOWN@{PAGE\_ALIGN\_DOWN}}
\index{PAGE\_ALIGN\_DOWN@{PAGE\_ALIGN\_DOWN}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{PAGE\_ALIGN\_DOWN}{PAGE\_ALIGN\_DOWN}}
{\footnotesize\ttfamily \label{paging_8c_add9fd0c9693ecc63a358073a5578ef23} 
\#define PAGE\+\_\+\+ALIGN\+\_\+\+DOWN(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{((x)\ \&\ \mbox{\hyperlink{paging_8c_ae4aa620ce57c7c3171b916de2c5f09f2}{\string~PAGE\_MASK}})}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{paging_8c_source_l00018}{18}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_a4cbb7f0db5ee5430437a2617c2a0f410}\index{paging.c@{paging.c}!PAGE\_ALIGN\_UP@{PAGE\_ALIGN\_UP}}
\index{PAGE\_ALIGN\_UP@{PAGE\_ALIGN\_UP}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{PAGE\_ALIGN\_UP}{PAGE\_ALIGN\_UP}}
{\footnotesize\ttfamily \label{paging_8c_a4cbb7f0db5ee5430437a2617c2a0f410} 
\#define PAGE\+\_\+\+ALIGN\+\_\+\+UP(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(((x)\ +\ \mbox{\hyperlink{paging_8c_ae4aa620ce57c7c3171b916de2c5f09f2}{PAGE\_MASK}})\ \&\ \mbox{\hyperlink{paging_8c_ae4aa620ce57c7c3171b916de2c5f09f2}{\string~PAGE\_MASK}})}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{paging_8c_source_l00019}{19}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_a04d95f827e85da8915a4eebff582a7be}\index{paging.c@{paging.c}!PAGE\_ENTRIES@{PAGE\_ENTRIES}}
\index{PAGE\_ENTRIES@{PAGE\_ENTRIES}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{PAGE\_ENTRIES}{PAGE\_ENTRIES}}
{\footnotesize\ttfamily \label{paging_8c_a04d95f827e85da8915a4eebff582a7be} 
\#define PAGE\+\_\+\+ENTRIES~512}



Definition at line \mbox{\hyperlink{paging_8c_source_l00013}{13}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_ae4aa620ce57c7c3171b916de2c5f09f2}\index{paging.c@{paging.c}!PAGE\_MASK@{PAGE\_MASK}}
\index{PAGE\_MASK@{PAGE\_MASK}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{PAGE\_MASK}{PAGE\_MASK}}
{\footnotesize\ttfamily \label{paging_8c_ae4aa620ce57c7c3171b916de2c5f09f2} 
\#define PAGE\+\_\+\+MASK~0x\+FFFULL}



Definition at line \mbox{\hyperlink{paging_8c_source_l00017}{17}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_ae8f4eec8c194962159f36f934954d2a3}\index{paging.c@{paging.c}!PAGE\_SIZE\_4K@{PAGE\_SIZE\_4K}}
\index{PAGE\_SIZE\_4K@{PAGE\_SIZE\_4K}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{PAGE\_SIZE\_4K}{PAGE\_SIZE\_4K}}
{\footnotesize\ttfamily \label{paging_8c_ae8f4eec8c194962159f36f934954d2a3} 
\#define PAGE\+\_\+\+SIZE\+\_\+4K~0x1000}



Definition at line \mbox{\hyperlink{paging_8c_source_l00014}{14}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_a4a6ba206104f470a098a0f5c161c2ce7}\index{paging.c@{paging.c}!RECURSIVE\_INDEX@{RECURSIVE\_INDEX}}
\index{RECURSIVE\_INDEX@{RECURSIVE\_INDEX}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{RECURSIVE\_INDEX}{RECURSIVE\_INDEX}}
{\footnotesize\ttfamily \label{paging_8c_a4a6ba206104f470a098a0f5c161c2ce7} 
\#define RECURSIVE\+\_\+\+INDEX~0x1\+FF}



Definition at line \mbox{\hyperlink{paging_8c_source_l00020}{20}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.



\label{doc-func-members}
\Hypertarget{paging_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{paging_8c_a8a5e657a727356ab419f20fa707576d5}\index{paging.c@{paging.c}!map\_page@{map\_page}}
\index{map\_page@{map\_page}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{map\_page()}{map\_page()}}
{\footnotesize\ttfamily \label{paging_8c_a8a5e657a727356ab419f20fa707576d5} 
void map\+\_\+page (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtualaddress}{, }\item[{uintptr\+\_\+t}]{physicaladdress}{, }\item[{uint64\+\_\+t}]{flags}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{paging_8c_source_l00097}{97}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_ad2e187bf95efccc510942190ab675a03}\index{paging.c@{paging.c}!MtAddPageFlags@{MtAddPageFlags}}
\index{MtAddPageFlags@{MtAddPageFlags}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{MtAddPageFlags()}{MtAddPageFlags()}}
{\footnotesize\ttfamily \label{paging_8c_ad2e187bf95efccc510942190ab675a03} 
void Mt\+Add\+Page\+Flags (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtualaddress}{, }\item[{uint64\+\_\+t}]{flags}{}\end{DoxyParamCaption})}



This function adds (doesn\textquotesingle{}t set) flags to the specified virtual address (if exists). This DOES NOT set flags! (Which means flags that are ON will stay ON and will not get rewritten) 


\begin{DoxyParams}{Parameters}
{\em virtualaddress} & VA\\
\hline
{\em flags} & PAGE\+\_\+\+FLAGS flags.\\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{paging_8c_source_l00251}{251}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_aeed6cb9923e09f06a5e24339fb3dd62e}\index{paging.c@{paging.c}!MtIsAddressValid@{MtIsAddressValid}}
\index{MtIsAddressValid@{MtIsAddressValid}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{MtIsAddressValid()}{MtIsAddressValid()}}
{\footnotesize\ttfamily \label{paging_8c_aeed6cb9923e09f06a5e24339fb3dd62e} 
bool Mt\+Is\+Address\+Valid (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtual\+Addr}{}\end{DoxyParamCaption})}



This function checks if the virtual address given to it, is valid and present in the page tables of the kernel. 


\begin{DoxyParams}{Parameters}
{\em virtual\+Addr} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True or False based if present or not.
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{paging_8c_source_l00285}{285}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_a7359fbe284826fefffe68a4b13305e4f}\index{paging.c@{paging.c}!MtTranslateVirtualToPhysical@{MtTranslateVirtualToPhysical}}
\index{MtTranslateVirtualToPhysical@{MtTranslateVirtualToPhysical}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{MtTranslateVirtualToPhysical()}{MtTranslateVirtualToPhysical()}}
{\footnotesize\ttfamily \label{paging_8c_a7359fbe284826fefffe68a4b13305e4f} 
uintptr\+\_\+t Mt\+Translate\+Virtual\+To\+Physical (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtualaddress}{}\end{DoxyParamCaption})}



This function translates the virtual address to its corresponding physical address in the page tables if present. 


\begin{DoxyParams}{Parameters}
{\em virtualaddress} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Physical Address or 0 if not found.
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{paging_8c_source_l00314}{314}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_a4eef2c9157893448c93129145533f449}\index{paging.c@{paging.c}!set\_page\_user\_access@{set\_page\_user\_access}}
\index{set\_page\_user\_access@{set\_page\_user\_access}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{set\_page\_user\_access()}{set\_page\_user\_access()}}
{\footnotesize\ttfamily \label{paging_8c_a4eef2c9157893448c93129145533f449} 
void set\+\_\+page\+\_\+user\+\_\+access (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtualaddress}{, }\item[{bool}]{user\+\_\+accessible}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{paging_8c_source_l00212}{212}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_abbe37894b5dfd8416ec7d52d49b4b2cb}\index{paging.c@{paging.c}!set\_page\_writable@{set\_page\_writable}}
\index{set\_page\_writable@{set\_page\_writable}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{set\_page\_writable()}{set\_page\_writable()}}
{\footnotesize\ttfamily \label{paging_8c_abbe37894b5dfd8416ec7d52d49b4b2cb} 
void set\+\_\+page\+\_\+writable (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtualaddress}{, }\item[{bool}]{writable}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{paging_8c_source_l00172}{172}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.

\Hypertarget{paging_8c_aa3ee992da567c2b694b9c148175ba07b}\index{paging.c@{paging.c}!unmap\_page@{unmap\_page}}
\index{unmap\_page@{unmap\_page}!paging.c@{paging.c}}
\doxysubsubsection{\texorpdfstring{unmap\_page()}{unmap\_page()}}
{\footnotesize\ttfamily \label{paging_8c_aa3ee992da567c2b694b9c148175ba07b} 
bool unmap\+\_\+page (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{virtualaddress}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{paging_8c_source_l00138}{138}} of file \mbox{\hyperlink{paging_8c_source}{paging.\+c}}.


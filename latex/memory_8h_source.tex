\doxysection{memory.\+h}
\hypertarget{memory_8h_source}{}\label{memory_8h_source}\index{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/memory/memory.h@{C:/Users/matanel/Desktop/Projects/KernelDevelopment/kernel/memory/memory.h}}
\mbox{\hyperlink{memory_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00002}00002\ \textcolor{comment}{\ *\ PROJECT:\ \ \ \ \ MatanelOS\ Kernel}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00003}00003\ \textcolor{comment}{\ *\ LICENSE:\ \ \ \ \ NONE}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00004}00004\ \textcolor{comment}{\ *\ PURPOSE:\ \ \ \ \ Memory\ Management\ Header}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00005}00005\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00007}00007\ \textcolor{preprocessor}{\#ifndef\ MEMORY\_H}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00008}00008\ \textcolor{preprocessor}{\#define\ MEMORY\_H}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00009}00009\ \ \textcolor{comment}{//\ Standard\ headers,\ required.}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cpu_8h}{../cpu/cpu.h}}"{}}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{allocator_8h}{../memory/allocator/allocator.h}}"{}}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00015}00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{paging_8h}{../memory/paging/paging.h}}"{}}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00016}00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{trace_8h}{../trace.h}}"{}}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00017}00017\ \textcolor{comment}{/*\ Symbol\ defined\ in\ linker\ script,\ end\ of\ loaded\ kernel\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00018}00018\ \textcolor{keyword}{extern}\ uint8\_t\ \mbox{\hyperlink{memory_8h_aee0763743976908265c56bb03b8dfe2e}{kernel\_end}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00019}00019\ \textcolor{keyword}{extern}\ uint8\_t\ \mbox{\hyperlink{memory_8h_a3434331625aaebacdb2b110ebcad7974}{kernel\_start}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00020}00020\ \textcolor{keyword}{extern}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{memory_8h_a733c50a3cd83a7216b189443af19d071}{kernel\_length}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00022}00022\ \textcolor{comment}{/*\ Zero\ Out\ BSS\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00023}00023\ \textcolor{keyword}{extern}\ uint8\_t\ \mbox{\hyperlink{memory_8h_ad9f84c8ae582241d7b33c46a994b8445}{bss\_start}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00024}00024\ \textcolor{keyword}{extern}\ uint8\_t\ \mbox{\hyperlink{memory_8h_a2c8bdc1125232c0a840c4b3f423d8b48}{bss\_end}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00026}00026\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{memory_8h_aa1c249f197a325121cc9678b1665c29b}{zero\_bss}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00027}\mbox{\hyperlink{memory_8h_ac53b8879984cd2aec2645e9b76d984a9}{00027}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{memory_8h_ac53b8879984cd2aec2645e9b76d984a9}{check\_bss\_zeroed}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00029}00029\ \textcolor{comment}{/*\ Heap\ Size\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00031}00031\ \textcolor{comment}{/*\ Start\ and\ end\ of\ the\ heap\ region\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00032}\mbox{\hyperlink{memory_8h_ae9739bcecd10d5962cc10c12bf01594f}{00032}}\ \textcolor{preprocessor}{\#define\ HEAP\_START\ ((uintptr\_t)(\&kernel\_end))}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00033}\mbox{\hyperlink{memory_8h_a7437bbfa3a1415a7d91fded74239a762}{00033}}\ \textcolor{preprocessor}{\#define\ HEAP\_END\ \ \ (PHYS\_MEM\_BASE\ +\ PHYS\_MEM\_SIZE)}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00035}\mbox{\hyperlink{memory_8h_a1b45302695680930829cac31d65e41e1}{00035}}\ \textcolor{preprocessor}{\#define\ HEAP\_SIZE\ \ (HEAP\_END\ -\/\ HEAP\_START)}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00037}00037\ \textcolor{comment}{/*\ Block\ header\ placed\ immediately\ before\ each\ allocated\ chunk\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00038}\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r}{00038}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r}{\_BLOCK\_HEADER}}\ \{}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00039}\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a854352f53b148adc24983a58a1866d66}{00039}}\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a854352f53b148adc24983a58a1866d66}{size}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ total\ size\ of\ this\ block\ (including\ header)\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00040}\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a82d8713f7a74099672a951a2df5ac1e5}{00040}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r}{\_BLOCK\_HEADER}}*\ \mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a82d8713f7a74099672a951a2df5ac1e5}{next}};\ \textcolor{comment}{/*\ next\ free\ block\ in\ the\ free\ list\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00041}\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a7768b84c51671204cc736430f48246a0}{00041}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a7768b84c51671204cc736430f48246a0}{in\_use}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00042}\mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_ade14ba6f0182584902c7a745f1f9f4d0}{00042}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_ade14ba6f0182584902c7a745f1f9f4d0}{kind}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00043}\mbox{\hyperlink{memory_8h_af209f9fe568c43c020d664ebab870cf0}{00043}}\ \}\ \mbox{\hyperlink{memory_8h_af209f9fe568c43c020d664ebab870cf0}{BLOCK\_HEADER}};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00045}\mbox{\hyperlink{memory_8h_af42a971f7393ee2aa82c6a256da5296fa41dd5a9eae06c962680821a3c649f7fc}{00045}}\ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{memory_8h_af42a971f7393ee2aa82c6a256da5296fa3f500941d6f538c368cdbc61cbdbc59c}{BLK\_NORMAL}}\ =\ 0,\ \mbox{\hyperlink{memory_8h_af42a971f7393ee2aa82c6a256da5296fa41dd5a9eae06c962680821a3c649f7fc}{BLK\_EX}}\ =\ 1\ \};}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00047}00047\ \textcolor{comment}{/*\ Initialize\ the\ free\ list\ to\ cover\ the\ whole\ heap\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00048}00048\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{memory_8h_ae9571189e4229763c03dbf08f551f33f}{init\_heap}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00050}00050\ \textcolor{comment}{/*\ Simple\ Memset\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00051}00051\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{memory_8h_aa3e72f75500f5ac381dd21e9510e75c4}{kmemset}}(\textcolor{keywordtype}{void}*\ dest,\ int64\_t\ val,\ uint64\_t\ len);}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00053}00053\ \textcolor{comment}{/*\ Added\ Memcpy\ */}}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00054}00054\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{memory_8h_ab39f87327d3ce3e35d369e4e9f7a4c69}{kmemcpy}}(\textcolor{keywordtype}{void}*\ dest,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ src,\ uint32\_t\ len);}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00062}00062\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{memory_8h_aeffa40f233ea2b01e0a1a80751cc3041}{MtAllocateVirtualMemory}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a854352f53b148adc24983a58a1866d66}{size}},\ \textcolor{keywordtype}{size\_t}\ align);}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00073}00073\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{memory_8h_a5ab13cdbad32f741f3e3d214053daa50}{MtAllocateVirtualMemoryEx}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct___b_l_o_c_k___h_e_a_d_e_r_a854352f53b148adc24983a58a1866d66}{size}},\ \textcolor{keywordtype}{size\_t}\ align,\ uint64\_t\ flags);}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00079}00079\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{memory_8h_af1b9597857f95921e2e2dc63e84394fa}{MtFreeVirtualMemory}}(\textcolor{keywordtype}{void}*\ ptr);}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00086}00086\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{memory_8h_a8e94e4cf36924a0d2f3d86a3c77fb252}{MtIsHeapAddressAllocated}}(\textcolor{keywordtype}{void}*\ ptr);}
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{memory_8h_source_l00088}00088\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ MEMORY\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
